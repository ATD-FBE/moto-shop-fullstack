@use 'sass:color';

/// Fonts ///
@font-face {
    font-family: 'Roboto';
    src: url('/fonts/Roboto/Roboto-VariableFont_wdth,wght.ttf') format('truetype');
    font-weight: 100 900;
    font-style: normal;
    font-display: swap;
}
@font-face {
    font-family: 'Roboto';
    src: url('/fonts/Roboto/Roboto-Italic-VariableFont_wdth,wght.ttf') format('truetype');
    font-weight: 100 900;
    font-style: italic;
    font-display: swap;
}

/// Global Constants ///
:root {
    --load-status-min-height: 120px;
    --fast-animation-duration: 160ms;
    --medium-animation-duration: 320ms;
}

$color-main-light: rgb(230, 235, 240);
$color-main-light-active: rgb(182, 188, 192);
$color-main-dark: rgb(31, 25, 56);
$color-main-dark-enhanced: rgb(81, 70, 126);
$color-main-dark-active: rgb(109, 100, 143);
$color-main-dark-inactive: rgb(175, 168, 202);
$color-main-enhanced: rgb(180, 41, 99);
$color-main-enabled: rgb(218, 241, 248);
$color-main-inactive: rgb(123, 125, 128);
$color-additional: rgb(206, 132, 22);
$color-blue: rgb(25, 100, 195);
$color-blue-light: rgb(14, 130, 184);
$color-green: rgb(0, 140, 0);
$color-green-light: rgb(50, 255, 50);
$color-red: rgb(240, 0, 0);
$color-red-light: rgb(255, 100, 100);
$color-brown: rgb(126, 94, 27);
$color-brown-light: rgb(153, 127, 9);
$color-yellow: rgb(255, 239, 98);
$color-orange: color.mix($color-red, $color-yellow, 68%);
$color-warn-light: rgb(224, 81, 77);
$color-warn-dark: rgb(165, 63, 62);
$background-color-warn: rgb(247, 220, 220);
$background-color-header: rgb(95, 20, 91);
$background-color-header-active: rgb(133, 25, 88);
$background-color-menu: rgb(39, 28, 78);
$background-color-menu-active: rgb(50, 36, 99);
$background-color-disabled: rgb(228, 228, 228);
$background-color-form: color.mix(#fff, $color-main-dark, 90%);
$background-color-form-inactive: color.mix(#fff, $color-main-dark, 80%);
$border-color-form: color.mix(#fff, $color-main-dark, 60%);
$base-min-width: 320px;
$nav-items-min-space: 18px;
$header-main-panel-height: 64px;
$header-dashboard-panel-height: 64px;
$header-content-min-height-large: 60px;
$header-content-min-height-small: 40px;
$main-content-spacing: 20px;
$order-content-spacing: 10px;
$entity-table-cell-padding-x: 3px;
$entity-table-border-color: rgba($color-blue, 0.5);
$form-field-base-height: 33px;
$form-field-btn-width: 42px;
$form-field-btn-margin-right: 10px;
$product-thumb-smallest-size: 48px;
$product-thumb-small-size: 80px;
$product-thumb-medium-size: 220px;
$transition-fast-set: var(--fast-animation-duration) ease;
$transition-medium-set: var(--medium-animation-duration) ease-in-out;

/// Global Mixins ///

@mixin background-header($color) {
    background: linear-gradient(
        135deg,
        color.mix(#fff, $color, 75%) 0%, 
        color.mix(#fff, $color, 82%) 50%, 
        color.mix(#fff, $color, 75%) 100%
    );
}
@mixin dashboard-nav-role-colors($color1, $color2) {
    background-color: $color1;

    &:hover,
    &.active {
        background-color: $color2;
    }
}
@mixin dashboard-panel-role-colors($color1, $color2) {
    background-color: rgba($color1, 0.1);
    box-shadow: 0 6px 6px -6px $color1;

    .dashboard-header h2 {
        color: $color1;
    }
    .dashboard-nav li {
        @include dashboard-nav-role-colors($color1, $color2);
    }
}
@mixin field-shadow($color1, $color2) {
    box-shadow:
        inset 0 0 3px rgba($color1, 0.3),
        0 0 3px rgba($color2, 0.2);
}
@mixin field-hover-shadow($color1, $color2) {
    box-shadow:
        inset 0 0 5px rgba($color1, 0.5),
        0 0 3px rgba($color2, 0.3);
}
@mixin field-focus-shadow($color1, $color2) {
    box-shadow:
        inset 0 0 3px rgba($color1, 0.7),
        0 0 3px rgba($color2, 0.8);
}
@mixin designed-field() {
    @include field-shadow($color-main-dark, $color-main-enhanced);
    width: 100%;
    padding: 4px 6px;
    border: 2px solid $color-main-dark;
    border-radius: 4px;
    vertical-align: middle;
    font: 13pt Arial, sans-serif;
    transition:
        box-shadow $transition-fast-set,
        border-color $transition-fast-set,
        background-color $transition-fast-set,
        color $transition-fast-set;

    &.drag-active {
        @include field-hover-shadow($color-main-dark, $color-main-enhanced);
        border-color: $color-main-enhanced;
        background-color: rgba($color-main-enhanced, 0.15);
    }

    &:focus {
        @include field-focus-shadow($color-main-dark, $color-main-enhanced);
        outline: none;
        border-color: $color-main-enhanced;
        background-color: #fff;
        
        &::placeholder {
            opacity: 0.8;
        }
    }
    &:hover {
        @include field-hover-shadow($color-main-dark, $color-main-enhanced);
    }
    &[disabled] {
        @include field-shadow($color-main-dark, $color-main-enhanced);
        border-color: rgba($color-main-dark, 0.25);
        background-color: $background-color-disabled;
        color: rgba($color-main-dark, 0.3);
        pointer-events: none;
        
        &::placeholder {
            opacity: 0.5;
        }
    }
}
@mixin form-entry-label-base() {
    line-height: 1.1;
    letter-spacing: -0.02em;
    overflow-wrap: anywhere;

    .optional {
        display: block;
        color: $color-main-enhanced;
        font-size: 0.75em;
        font-weight: bold;
        font-style: italic;
        line-height: 1;
        opacity: 0.85;
    }
}
@mixin form-entry-field-base() {
    position: relative;
    text-align: right;

    input,
    textarea,
    select,
    output,
    .image-uploader-grid {
        @include designed-field();
        z-index: 1;
    }
    input:not([type="file"]),
    select {
        height: $form-field-base-height;
    }
    input[type="file"] {
        height: calc($form-field-base-height + 6px);
    }
    output {
        display: inline-block;
        min-height: $form-field-base-height;
        overflow-wrap: anywhere;
    }
    .image-uploader-grid {
        padding: 6px;
    }
    & > .designed-checkbox-container { // Чекбокс является частью (полем) формы
        height: $form-field-base-height;

        .checkbox-label {
            font-size: 10pt;
            line-height: 1.1;
            white-space: normal;
            overflow-wrap: anywhere;
        }
    }

    &.invalid > :is(
        input, textarea, select, output,
        input[disabled], textarea[disabled], select[disabled], output[disabled],
        .image-uploader-grid
    ) {
        @include field-shadow($color-red, $color-red-light);
        border-color: $color-red;
        background-color: rgba($color-red, 0.1);

        &:hover:not(:focus, [disabled]) {
            @include field-hover-shadow($color-red, $color-red-light);
        }
    }
    &.changed > :is(
        input, textarea, select, output,
        input[disabled], textarea[disabled], select[disabled], output[disabled],
        .image-uploader-grid
    ) {
        @include field-shadow($color-green, $color-green-light);
        border-color: $color-green;
        background-color: rgba($color-green, 0.1);
    }

    .save-status {
        position: absolute;
        right: 0;
        top: 0;
        z-index: 0;
        color: $color-main-dark-inactive;
        font-size: 9pt;
        line-height: 1;
        opacity: 0;
        visibility: hidden;
        pointer-events: none;
        transition:
            top $transition-fast-set,
            color $transition-fast-set,
            opacity $transition-fast-set,
            visibility $transition-fast-set;

        &.saving,
        &.success,
        &.error {
            top: -1em;
            opacity: 1;
            visibility: visible;
            pointer-events: auto;
        }
        &.saving {
            color: $color-additional;
        }
        &.success {
            color: $color-green;
        }
        &.error {
            color: $color-red;
        }
    }
    .invalid-message,
    .note {
        position: absolute;
        font-size: 9pt;
        line-height: 1;
        text-align: left;
        text-indent: -0.4em;

        &.invalid-message {
            color: $color-red;
        }
        &.note {
            color: $color-warn-dark;
        }
    }
}
@mixin main-content-header($min-height, $background-color) {
    @include background-header($background-color);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    min-height: $min-height;
    padding: 6px;
    color: $color-main-dark;
    font-size: inherit;
    text-align: center;
    line-height: 1.2;
    overflow-wrap: anywhere;

    p {
        color: rgb(70, 70, 70);
        font-size: 14pt;
        font-weight: lighter;
    }
}
@mixin load-status-overlay() {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 100%;
    font-size: 12pt;
    text-align: center;

    .icon {
        display: inline-block;
        min-width: 1em;
        margin-right: 6px;
        font-size: 16pt;
        vertical-align: middle;
        line-height: 1;

        &.load {
            color: $color-additional;
        }
        &.error {
            color: $color-red;
        }
        &.not-found {
            color: $color-blue;
            filter: grayscale(0.3);
        }
        &.empty {
            color: $color-blue;
        }
        &.ready {
            color: $color-green;
        }
    }
    .reload-btn {
        @include control-button();
        margin-top: 10px;
    }
}
@mixin toolbar-item() {
    padding: 6px;
    background: $background-color-form;
    border: 1px solid $border-color-form;
}
@mixin badge-box-base() {
    display: inline-flex;
    flex-direction: column;
    justify-content: center;
    align-items: flex-start;
    gap: 1px;
    vertical-align: middle;

    .badge {
        flex-shrink: 0;
        display: inline-flex;
        justify-content: center;
        align-items: center;
        min-width: 19px;
        height: 19px;
        padding: 0 4px;
        border-radius: 12px;
        background: $color-red;
        color: $color-main-light;
        font-size: 10pt;
        line-height: 1;
        white-space: nowrap;

        &.inactive {
            background: $color-main-dark-inactive;
        }
    }
}
@mixin text-styles() {
    span {
        &.color-blue { color: $color-blue; }
        &.color-red { color: $color-red; }
        &.color-green { color: $color-green; }
        &.color-brown { color: $color-brown-light; }
        &.bold { font-weight: bold; }
        &.underline { text-decoration: underline; }
        &.cursive { font-style: italic; }
    }
}
@mixin order-intent() {
    &.neutral { color: $color-additional; }
    &.positive { color: $color-green; }
    &.negative { color: $color-red; }
    &.warning { color: $color-warn-light; }
    &.highlight { color: $color-blue; }
    &.blocked { color: $color-warn-dark; }
}
@mixin last-financials-event() {
    .last-financials-event-label {
        @include order-intent();
    }
    .last-financials-event-amount {
        padding: 2px;
        background-color: rgba(#fff, 0.25);
        color: color.mix($color-brown, $color-main-dark-active, 50%);
    }
}
@mixin designed-link() {
    display: inline-block;
    padding: 3px;
    border: 1px solid $color-green;
    border-radius: 2px;
    box-shadow: 0 1px 3px rgba($color-main-dark, 0.5);
    background-color: $color-green;
    color: #fff;
    font: 10pt 'Roboto', sans-serif;
    text-decoration-color: transparent;
    white-space: nowrap;
    transition:
        background-color $transition-fast-set,
        color $transition-fast-set,
        text-decoration-color $transition-fast-set;

    &:hover {
        background-color: #fff;
        color: $color-green;
    }
    &:active {
        background-color: $color-main-enabled;
        color: $color-green;
        text-decoration-color: $color-green;
    }
}
@mixin form-button() {
    padding: 8px 12px;
    box-shadow: 0 0 6px rgba($color-main-enhanced, 0.6);
    border: 2px solid $color-main-enhanced;
    border-radius: 5px;
    background-color: $color-main-enhanced;
    color: $color-main-light;
    font: 11pt 'Roboto', sans-serif;
    font-weight: bold;
    white-space: nowrap;
    cursor: pointer;
    transition:
        box-shadow $transition-fast-set,
        border-color $transition-fast-set,
        background-color $transition-fast-set,
        color $transition-fast-set,
        transform $transition-fast-set;

    &:hover {
        box-shadow:
            0 0 6px rgba($color-main-enhanced, 1),
            inset 0 0 3px rgba($color-main-enhanced, 0.8);
        border-color: $color-main-enhanced;
        background-color: #fff;
        color: $color-main-enhanced;
    }
    &:active {
        transform: scale(0.98);
    }
    &:focus {
        outline: none;
        box-shadow:
            0 0 5px rgba($color-main-dark, 0.8),
            0 0 10px rgba($color-main-enhanced, 1);
    }
    &[disabled] {
        box-shadow: 0 0 6px rgba($color-main-dark, 0.6);
        border-color: rgba($color-main-dark, 0.15);
        background-color: rgba($color-main-dark, 0.4);
        color: rgba(255, 255, 255, 0.78);
        cursor: default;
        pointer-events: none;
    }
}
@mixin admin-button() {
    min-width: 124px;
    min-height: 30px;
    padding: 4px;
    box-shadow: 1px 1px 3px 0 $color-blue;
    color: $color-blue;
    font-weight: bold;
    line-height: 1.1;
    letter-spacing: -0.04em;
    white-space: nowrap;
    cursor: pointer;

    &.enabled {
        outline: 1px solid $color-main-dark-active;
        box-shadow: 1px 1px 3px 0 $color-main-dark-active;
        color: $color-main-dark-active;

        .icon {
            color: $color-blue;
        }
    }
    &:active {
        outline: none;
        background-color: rgb(98, 187, 228);
    }
    &[disabled] {
        box-shadow: 1px 1px 3px 0 $color-main-dark-inactive;
        border: 2px solid $color-main-dark-inactive;
        color: $color-main-dark-inactive;
        cursor: default;
        pointer-events: none;

        .icon {
            color: $color-main-dark-inactive;
        }
    } 

    .icon {
        margin-right: 0.4em;
        color: $color-green;
    }
}
@mixin control-button() {
    display: inline-block;
    padding: 2px 4px;
    border: 1px solid $color-main-dark;
    border-radius: 2px;
    background-color: $color-main-light;
    color: $color-main-dark;
    font-size: inherit;
    font-weight: normal;
    text-align: center;
    letter-spacing: -0.02em;
    white-space: nowrap;
    box-shadow: 1px 1px 2px 0 rgba($color-main-dark, 0.5);
    cursor: pointer;
    transition:
        border-color $transition-fast-set,
        background-color $transition-fast-set,
        color $transition-fast-set,
        box-shadow $transition-fast-set;

    &.enabled {
        border-color: $color-blue-light;
        background-color: $color-main-enabled;
        color: $color-blue-light;
    }
    &:hover {
        color: $color-main-enhanced;
        border-color: $color-main-enhanced;
    }
    &:active {
        background-color: color.mix($color-main-light, $color-main-enhanced, 95%);
        color: $color-main-enhanced;
        box-shadow: 1px 1px 0 0 rgba($color-main-dark, 0.5);
    }
    &[disabled] {
        background-color: $color-main-light;
        color: $color-main-dark-inactive;
        border-color: $color-main-dark-inactive;
        cursor: default;
        transition: none;
        pointer-events: none;
    }
}
@mixin link-transition($color1, $color2) {
    color: $color1;
    transition: color $transition-fast-set;

    &:hover {
        color: $color2;
    }
}
@mixin entity-table-base() {
    display: flex;
    flex-direction: column;
    gap: 4px;

    .table-header,
    .table-row-main,
    .table-footer {
        display: grid;
        align-items: center;
        border: 1px solid $entity-table-border-color;

        [role="row"] {
            display: contents; // Пробрасывает контент грида через элемент с ролью строки таблицы 
        }

        .row-cell {
            display: flex;
            gap: 0.4em;
            padding: 0 $entity-table-cell-padding-x;
            overflow-wrap: anywhere;

            .cell-label:not(.visible) {
                display: none;
            }
        }
    }
        
    .table-header,
    .table-footer {
        padding: calc($entity-table-cell-padding-x * 4) $entity-table-cell-padding-x;
        background-color: color.mix(rgba(#fff, 0.7), rgba($color-blue, 0.7), 80%);
        font-weight: bold;
    }

    .table-body {

        .table-load-status {
            @include load-status-overlay();
            background: rgba(255, 255, 255, 0.5);
        }

        .table-row {
            list-style: none;

            &:nth-child(odd) {
                .table-row-main:not(.hovered, .warning, .inactive) {
                    background: rgba(248, 248, 248, 0.5);
                }
                .table-row-main.warning {
                    background: color.mix(rgba(255, 255, 255, 0.5), rgba($color-red, 0.5), 74%);
                }
                .table-row-main.inactive {
                    background:
                        color.mix(rgba(255, 255, 255, 0.5), rgba($color-main-dark-enhanced, 0.8), 74%);
                }
            }
            &:not(:last-child) > .table-row-main {
                border-bottom: none;
            }
            &:last-child > .table-row-expansion-collapsible > .context-indicator {
                border-top: none;
            }

            .table-row-main {
                padding: calc($entity-table-cell-padding-x * 2) $entity-table-cell-padding-x;
                background: rgba(255, 255, 255, 0.5);
                
                &.hovered {
                    background: color.mix(rgba(255, 255, 255, 0.5), rgba($color-blue, 0.5), 85%);
                }
                &.warning {
                    background: color.mix(rgba(255, 255, 255, 0.5), rgba($color-red, 0.5), 78%);
                }
                &.warning.hovered {
                    background: color.mix(rgba(255, 255, 255, 0.5), rgba($color-red, 0.5), 84%);
                }
                &.inactive {
                    background:
                        color.mix(rgba(255, 255, 255, 0.5), rgba($color-main-dark-enhanced, 0.8), 78%);
                }
                &.inactive.hovered {
                    background:
                        color.mix(rgba(255, 255, 255, 0.5), rgba($color-main-dark-enhanced, 0.8), 84%);
                }
            }
            .table-row-expansion-collapsible {
                grid-column: 1 / -1; // Растягивание грида на всю ширину

                .context-indicator {
                    border-top: 1px solid $entity-table-border-color;
                }
            }
        }
    }
}
@mixin entity-table-mini() {
    .table-header,
    .table-footer {
        display: block;
        padding: calc($entity-table-cell-padding-x * 4) 0;

        .row-cell {
            min-height: 34px;
        }
    }

    .table-header {
        .row-cell:not(.visible) {
            display: none;
        }
    }

    .table-header .row-cell.visible,
    .table-row-main .row-cell,
    .table-footer .row-cell {
        display: grid;
        grid-template-columns: 1fr 1fr;
        align-items: center;
        padding: $entity-table-cell-padding-x;
        
        .cell-label {
            padding: 0 $entity-table-cell-padding-x;
            font-weight: bold;
            text-align: right;

            &:not(.visible) {
                display: block;
            }
        }
        .cell-content {
            padding: 0 $entity-table-cell-padding-x;
        }
    }

    .table-body {
        .table-row {
            &:nth-child(odd) {
                .table-row-main:not(.hovered, .warning, .inactive) {
                    background: none;
                }
                .table-row-main.warning {
                    background: color.mix(rgba(255, 255, 255, 0.5), rgba($color-red, 0.5), 55%);
                }
                .table-row-main.inactive {
                    background:
                        color.mix(rgba(255, 255, 255, 0.5), rgba($color-main-dark-enhanced, 0.8), 55%);
                }
            }

            .table-row-main {
                display: block;
                padding: 0;
                background: none;

                &.hovered {
                    background: color.mix(rgba(255, 255, 255, 0.5), rgba($color-blue, 0.5), 65%);
                }
                &.warning {
                    background: color.mix(rgba(255, 255, 255, 0.5), rgba($color-red, 0.5), 55%);
                }
                &.warning.hovered {
                    background: color.mix(rgba(255, 255, 255, 0.5), rgba($color-red, 0.5), 70%);
                }
                &.inactive {
                    background:
                        color.mix(rgba(255, 255, 255, 0.5), rgba($color-main-dark-enhanced, 0.8), 55%);
                }
                &.inactive.hovered {
                    background:
                        color.mix(rgba(255, 255, 255, 0.5), rgba($color-main-dark-enhanced, 0.8), 70%);
                }

                .row-cell {
                    min-height: 34px;
                    background: rgba(255, 255, 255, 0.5);

                    &:nth-child(odd) {
                        background: rgba(248, 248, 248, 0.5);
                    }
                }
            }
        }
    }
}

/// Global Components and Elements ///

*,
*::before,
*::after {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html,
body {
    width: 100%;
    min-width: $base-min-width;
    height: 100%;
    font: 12pt/1.25 Arial, sans-serif;
}
button {
    user-select: none;
}
ul {
    list-style-position: inside;
}

.global-loader {
    position: fixed;
    inset: 0; // top: 0; right: 0; bottom: 0; left: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100vw;
    height: 100vh;
    z-index: 9999;
    background-color: rgba($color-main-enabled, 0.4);
    opacity: 0;
    pointer-events: none;
    transition: opacity $transition-fast-set;

    &.visible {
        opacity: 1;
        pointer-events: auto;
    }
}

.modal-backdrop-portal {
    position: fixed;
    inset: 0; // top: 0; right: 0; bottom: 0; left: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100vw;
    height: 100vh;
    z-index: 9999;
    background-color: rgba($color-main-dark, 0.8);
    opacity: 0;
    transition: opacity $transition-fast-set;

    &.visible {
        opacity: 1;

        .confirm-modal,
        .alert-modal,
        .image-viewer-modal {
            transform: scale(1);
            opacity: 1;
        }
    }

    .confirm-modal,
    .alert-modal {
        min-width: 400px;
        max-width: 35%;
        max-height: 70%;
        padding: 24px;
        border: 2px solid $color-main-dark;
        border-radius: 12px;
        background: $color-main-light;
        text-align: center;
        overflow: auto;
        transform: scale(0.9);
        opacity: 0;
        transition:
            transform $transition-fast-set,
            opacity $transition-fast-set;
    }

    .confirm-modal {
        .prompt {
            @include text-styles();
            font-family: 'Roboto', sans-serif;
            font-size: 12pt;
            line-height: 1.2;

            .icon {
                margin-right: 0.3em;
                color: $color-red;
                font-size: 17pt;
            }
        }
        .error-message {
            min-height: 1em;
            margin-top: 10px;
            line-height: 1;
            color: $color-red;
            font-size: 10pt;
            font-weight: bold;
        }
        .buttons-box {
            display: flex;
            justify-content: center;
            margin-top: 10px;
            
            button {
                @include admin-button();
                white-space: normal;
    
                &:not(:first-child) {
                    margin-left: $main-content-spacing;
                }
                &.cancel-btn:not([disabled]) > .icon {
                    color: $color-red;
                }
            }
        }
    }

    .alert-modal {
        @mixin alert-modal-color($color) {
            border-color: $color;

            .title {
                color: $color;

                .icon {
                    color: $color;
                }
            }
        }

        &.info {
            @include alert-modal-color($color-blue);
        }
        &.warning {
            @include alert-modal-color($color-additional);
        }
        &.error {
            @include alert-modal-color($color-red);
        }
        
        .title {
            font-family: 'Roboto', sans-serif;
            line-height: 1.2;

            .icon {
                margin-right: 0.3em;
                font-size: 17pt;
            }
        }
        .message {
            @include text-styles();
            margin-top: 12px;
            font-family: 'Roboto', sans-serif;
            font-size: 12pt;
            line-height: 1.2;
        }
        .button-box {
            margin-top: 20px;

            button {
                @include admin-button();
            }
        }
    }

    .image-viewer-modal {
        $thumb-btn-size: 96px;
        $thumbs-container-spacing: 8px;
        $thumbs-container-width: $thumb-btn-size + $thumbs-container-spacing * 2;

        display: flex;
        position: relative;
        width: 100%;
        height: 100%;
        background-color: rgba($color-main-dark, 0.95);
        transform: scale(0.9);
        opacity: 0;
        overflow: hidden;

        .thumbs-container {
            height: 100%;
            border-right: 1px solid $color-additional;
            overflow: hidden;
    
            .thumbs-scroll {
                display: flex;
                flex-direction: column;
                gap: $thumbs-container-spacing;
                height: 100%;
                padding: $thumbs-container-spacing;
                overflow: hidden auto;
    
                .thumb-btn {
                    flex-shrink: 0;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    width: $thumb-btn-size;
                    height: $thumb-btn-size;
                    padding: 2px;
                    border: 2px solid rgba($color-main-dark, 0.95);
                    box-shadow: 0 0 2px transparent;
                    background: none;
                    color: $color-main-light;
                    cursor: pointer;
                    transition:
                        border-color $transition-fast-set,
                        box-shadow $transition-fast-set;

                    &:hover {
                        border-color: $color-main-enabled;
                        box-shadow: 0 0 2px $color-main-light;
                    }
                    &.current {
                        border-color: $color-blue;
                        box-shadow: 0 0 2px $color-blue;
                    }
                    &.current:hover {
                        box-shadow: 0 0 2px $color-main-light;
                    }
    
                    .thumb-img {
                        display: block;
                        max-width: 100%;
                        max-height: 100%;
                    }
                }
            }
        }

        .main-image-container {
            flex: 1;
            overflow: auto;

            .main-image-wrapper {
                display: flex;
                justify-content: center;
                align-items: center;
                width: 100%;
                height: 100%;
                color: $color-main-light;

                &.zoomed {
                    display: block;
                    width: auto;
                    height: auto;
                    margin: auto; // Для центрирования

                    .main-image {
                        display: block;
                        max-width: none;
                        max-height: none;
                        margin: auto; // Для центрирования
                        cursor: zoom-out;
                    }
                }
    
                .main-image {
                    max-width: 100%;
                    max-height: 100%;
                    vertical-align: middle;
                    user-select: none;
        
                    &.zoomable {
                        cursor: zoom-in;
                    }
                }
            }
        }
        
        .close-btn {
            position: absolute;
            top: $main-content-spacing;
            right: $main-content-spacing;
            background: none;
            border: none;
            color: $color-main-light;
            font-size: 22pt;
            text-shadow: 0 0 8px $color-main-dark-active;
            line-height: 1;
            cursor: pointer;
            user-select: none;

            &:hover {
                color: $color-main-light-active;
            }
            &:active {
                color: $color-main-enhanced;
            }
        }
    
        .nav-arrows {
            display: flex;
            gap: $main-content-spacing;
            position: absolute;
            bottom: $main-content-spacing;
            left: calc(50% + $thumbs-container-width / 2);
            transform: translateX(-50%);
    
            button {
                display: flex;
                justify-content: center;
                align-items: center;
                width: 68px;
                height: 42px;
                border: 1px solid $color-main-light;
                border-radius: 4px;
                background: rgba($color-main-dark-active, 0.75);
                cursor: pointer;

                .icon {
                    color: $color-main-light;
                    font-size: 28pt;
                    line-height: 1;
                    user-select: none;
                }

                &:hover {
                    border: 1px solid $color-main-light-active;

                    .icon {
                        color: $color-main-light-active;
                    }
                }
                &:active {
                    border: 1px solid $color-main-enhanced;

                    .icon {
                        color: $color-main-enhanced;
                    }
                }
            }
        }
    }
}

.dropdown-portal {
    position: fixed;
    display: flex;
    flex-direction: column;
    justify-content: space-evenly;
    gap: 6px;
    padding: 10px;
    list-style: none;
    background-color: $background-color-menu;
    border-radius: 6px;
    border-top-left-radius: 0px;
    z-index: 1001;
    visibility: hidden;
    opacity: 0;
    transform-origin: 0 0;
    transform: scale(0);
    pointer-events: none;
    transition:
        visibility $transition-fast-set,
        opacity $transition-fast-set,
        transform $transition-fast-set;

    &.show {
        visibility: visible;
        opacity: 1;
        transform: scale(1);
        pointer-events: auto;
    }

    ul {
        li {
            display: flex;
            align-items: center;
    
            &.active {
                a {
                    color: $color-main-light-active;
                }
            }
    
            a {
                width: 100%;
                padding: 8px 12px;
                color: $color-main-light;
                font-size: 16px;
                text-decoration: none;
                white-space: nowrap;
                transition: background-color $transition-fast-set;
    
                &:hover {
                    background-color: $background-color-header-active;
                }
            }
        }
    }
}

.designed-checkbox-container {
    display: inline-flex;
    align-items: center;

    .checkbox-label {
        white-space: nowrap;

        &.left-side {
            margin-right: 0.3em;
        }
        &.right-side {
            margin-left: 0.3em;
        }
    }

    .designed-checkbox {
        flex-shrink: 0;
        display: inline-flex;
        justify-content: center;
        align-items: center;
        width: 17px;
        height: 17px;
        border: 1px solid;
        box-sizing: content-box;
        background: #fff;
        user-select: none;
        transition:
            background-color $transition-fast-set,
            box-shadow $transition-fast-set;

        &:focus {
            @include field-focus-shadow($color-main-dark, $color-main-enhanced);
            border-color: $color-main-enhanced;
            outline: none;
        }
    
        .check-icon {
            line-height: 1;
            font-size: 12pt;
            transform: translateY(1px);
            visibility: hidden;

            &.color-blue {
                color: $color-blue;
            }
            &.color-red {
                color: $color-red;
            }
            &.color-green {
                color: $color-green;
            }
            &.visible {
                visibility: visible;
            }
        }
    }
    
    input[type="checkbox"] {
        display: none;

        &[disabled] + .designed-checkbox {
            border-color: $color-main-dark-inactive;
            background: $color-main-light;
            pointer-events: none;

            &:focus {
                box-shadow: none;
                border-color: none;
            }

            .check-icon {
                color: $color-main-dark-inactive;
            }
        }
    }
}

.label-radio-btn {
    .designed-radio-btn {
        position: relative;
        left: 0;
        top: 2px;
        display: inline-block;
        width: 16px;
        height: 16px;
        border: 1px solid rgba($color-main-dark, 0.3);
        border-radius: 50%;
        background: $color-main-light;
        box-shadow: inset 0 0 4px rgba($color-main-dark, 0.5);
    }

    input[type="radio"] {
        display: none;

        &:checked + .designed-radio-btn {
            background: $color-blue;

            &::before {
                content: '';
                position: absolute;
                left: 3px;
                top: 3px;
                background: $color-main-light;
                width: 8px;
                height: 8px;
                border-radius: 50%;
                box-shadow: inset 0 0 1px rgba($color-blue, 0.5);
            }
        }
        &[disabled] + .designed-radio-btn {
            box-shadow: inset 0 0 4px rgba($color-main-dark, 0.25);
            border: 1px solid rgba($color-main-dark, 0.25);
            background: none;
            pointer-events: none;

            &::before {
                content: none;
            }
        }
    }

    &:hover > input[type="radio"]:not([disabled]) + .designed-radio-btn {
        border: 1px solid rgba($color-blue, 0.4);
        box-shadow: inset 0 0 4px rgba($color-blue, 0.8);
    }
    &:active > input[type="radio"]:not([disabled]) + .designed-radio-btn {
        background: $color-blue-light;
        border: 1px solid rgba($color-blue-light, 0.4);
        box-shadow: inset 0 0 4px rgba($color-blue-light, 0.8);
    }
}

.toolbar {
    display: flex;
    justify-content: space-between;
    gap: 6px;
    font-size: 11pt;
    white-space: nowrap;

    .page-limit-selector,
    .sorting-controls,
    .search-controls,
    .filter-controls {
        @include toolbar-item();
    }

    select {
        @include designed-field();
        width: auto;
        padding: 2px 3px;
        border-width: 1px;
        border-radius: 3px;
        font-size: inherit;
    }

    .page-limit-selector {
        display: flex;
        align-items: center;

        select {
            margin-left: 4px;
        }
    }

    .sorting-controls {
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        gap: 6px;

        select {
            margin-left: 12px;
        }
    }

    .search-controls {
        display: flex;
        align-items: center;
        width: 350px;
        min-width: 0;

        input[type="search"] {
            @include designed-field();
            margin-left: 4px;
            border-width: 1px;
            font-size: inherit;

            &::placeholder {
                font-size: 10pt;
            }
        }
        .search-btn {
            @include control-button();
            min-width: 52px;
            margin-left: 6px;
            padding: 4px;
        }
    }

    .filter-controls {
        display: flex;
        justify-content: center;
        align-items: center;
        position: relative;
        gap: 6px;

        .filter-settings-btn {
            @include control-button();
            padding: 4px;
        }
        .filter-settings {
            align-self: center;
            position: absolute;
            top: 100%;
            margin-top: 4px;
            padding: 8px;
            background: $color-main-enabled;
            color: $color-main-dark;
            border: 1px solid $color-main-dark;
            z-index: 10;
            visibility: hidden;
            opacity: 0;
            transform-origin: 50% 0;
            transform: scale(0%);
            transition:
                visibility $transition-fast-set,
                opacity $transition-fast-set,
                transform $transition-fast-set;

            &.enabled {
                visibility: visible;
                opacity: 1;
                transform: scale(100%);
            }

            .filter-option {
                display: flex;
                align-items: center;
                gap: 8px;
                min-height: 28px;
                margin-bottom: 6px;

                .option-label {
                    width: 100px;
                    white-space: normal;
                    overflow-wrap: anywhere;
                }
                .option-values {
                    display: flex;
                    align-items: center;
                    gap: 4px;

                    .label-radio-btn {
                        &:not(:last-child),
                        .designed-radio-btn {
                            margin-right: 4px;
                        }
                    }

                    &.option-range {
                        .range-field {
                            .range-prefix {
                                display: none;
                            }
                            input {
                                @include designed-field();
                                padding: 2px 3px;
                                border-width: 1px;
                                border-radius: 3px;
                                font-size: inherit;
                            }
    
                        }
                    }
                }
            }
            .filter-actions {
                display: flex;
                justify-content: space-between;
                gap: 8px;
                margin-top: 16px;

                .filter-btn,
                .reset-filter-btn {
                    @include control-button();
                    width: 128px;
                    padding: 4px;
                }
            }
        }
    }

    .pagination-pages {
        align-self: flex-end;
        color: $color-main-dark;
        text-align: right;
        white-space: nowrap;
    
        .page-controls-box {
            font-size: 12pt;
            font-weight: bold;

            & > *:not(:first-child) {
                margin-left: 8px;
            }

            button {
                all: unset;
                display: inline-block;
                padding: 0 2px;
                cursor: pointer;
                transition:
                    color $transition-fast-set,
                    background-color $transition-fast-set;

                &:focus:not(:active) {
                    outline: 1px solid rgba($color-main-enhanced, 0.5);
                    box-shadow: 0 0 4px $color-main-enhanced;
                }
                &:hover {
                    color: $color-main-enhanced;

                    @media (hover: none) {
                        color: inherit;
                    }
                }
                &[disabled] {
                    color: $color-main-dark-inactive;
                    text-decoration: none;
                    cursor: default;
                    transition: none;
                    pointer-events: none;
                }
                &.page-number-btn:not([disabled]) {
                    text-decoration: underline;
                }
                &.page-current-btn {
                    color: $color-blue;
                }
            }

            .ellipsis.inactive {
                color: $color-main-dark-inactive;
            }
        }

        .select-page-box {
            margin-top: 6px;
            font-size: inherit;

            .select-page-input {
                @include designed-field();
                width: 54px;
                margin-left: 4px;
                padding: 2px 3px;
                border-width: 1px;
                border-radius: 3px;
                font-size: inherit;
            }

            .select-page-btn {
                @include control-button();
                margin-left: 6px;
            }
        }
    }

    .pagination-info {
        color: $color-main-dark;
        font-size: 12pt;
        font-weight: bold;
        white-space: nowrap;
    }
}

.collapsible {
    height: 0;
    overflow-y: hidden;
    transition: height $transition-medium-set;

    &.fully-expanded {
        overflow-y: visible;
    }

    .context-indicator {
        display: flex;
        justify-content: center;

        .arrows-down-group {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 76px;
            height: $main-content-spacing;
        
            .arrow-down {
                transform: translateY(1px);
                font-size: 13.5pt;
                line-height: 1;
                color: rgba($color-blue, 0.85);
            }
        }
    }
}

.image-uploader-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;

    .image-thumb,
    .add-thumb-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        width: $product-thumb-small-size;
        height: $product-thumb-small-size;
        border: 2px solid $color-main-dark-inactive;
        border-radius: 6px;
        box-sizing: content-box;
        box-shadow: 0 0 3px rgba($color-main-dark, 0.25);
        user-select: none;
    }

    .image-thumb {
        position: relative;
        background-color: $color-main-light;
        overflow: hidden;
        cursor: zoom-in;
        transition:
            box-shadow $transition-fast-set,
            border-color $transition-fast-set;

        &.new {
            border-color: $color-blue-light;
        }
        &.main {
            border-color: $color-additional;
        }
        &.invalid {
            border-color: $color-red;
            background-color: rgba($color-red-light, 0.5);

            .thumb-img {
                opacity: 0.8;
            }
        }
        &.faded {
            .thumb-img {
                opacity: 0.4;
            }
        }

        &:hover {
            box-shadow: 0 0 5px rgba($color-main-dark, 0.5);
        }

        .thumb-img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            transition: opacity $transition-fast-set;
        }
        .checkbox-wrapper {
            position: absolute;

            &.select-main {
                top: 2px;
                left: 2px;
            } 
            &.delete {
                bottom: 2px;
                right: 2px;
            }
        }
    }
    
    .add-thumb-btn {
        background-color: color.mix(#fff, $color-blue, 75%);
        color: $color-main-dark;
        font-size: 36px;
        font-weight: bold;
        cursor: pointer;
        transition:
            box-shadow $transition-fast-set,
            border-color $transition-fast-set,
            background-color $transition-fast-set,
            color $transition-fast-set;

        &.drag-active,
        &:hover {
            box-shadow: 0 0 5px rgba($color-main-dark, 0.5);
            background-color: color.mix(#fff, $color-blue, 80%);
            color: $color-main-dark-active;
        }
        &:active {
            border-color: $color-main-enhanced;
            background-color: color.mix(#fff, $color-blue, 80%);
            color: $color-main-enhanced;
        }
        &[disabled] {
            box-shadow: 0 0 3px rgba($color-main-dark, 0.25);
            border-color: rgba($color-main-dark, 0.25);
            background-color: $background-color-disabled;
            color: rgba($color-main-dark, 0.25);
            cursor: default;
            pointer-events: none;
        }
    }
}

.form-header {
    h2 {
        @include background-header($background-color-header);
        color: $color-main-dark;
        font-size: 22pt;
        line-height: 1.5;
        text-align: center;
    }
}

.form-footer {
    display: flex;

    .form-status {
        display: flex;
        justify-content: flex-start;
        align-items: center;
        width: 100%;
        font-weight: bold;

        &.neutral {
            color: $color-additional;
        }
        &.positive {
            color: $color-green;
        }
        &.negative {
            color: $color-red;
        }
        &.warning {
            color: $color-orange;
        }

        .icon-box {
            flex-shrink: 0;
            display: flex;
            justify-content: center;
            min-width: 26px;
            font-size: 20pt;
        }
        .message-box {
            margin: 0 12px;
            line-height: 1.1;
            text-align: left;

            .main-message {
                margin-bottom: 3px;
                font-size: 11.5pt;
            }
            .additional-message {
                font-size: 9pt;

                .reload-btn {
                    @include control-button();
                    margin-left: 0.4em;
                }
            }
        }
    }

    .submit-btn-wrapper {
        button {
            @include form-button();
        }
    }
}

mark.highlighted-text {
    color: $color-main-dark;
}

.new-items-alert {
    position: fixed;
    top: calc($header-main-panel-height + $header-dashboard-panel-height + $main-content-spacing);
    left: 0;
    width: fit-content;
    padding: 6px;
    border: 1px solid $color-main-dark-inactive;
    box-shadow: 0 2px 6px 1px rgba($color-main-dark-active, 0.35);
    background: linear-gradient(
        45deg,
        $color-main-dark-enhanced 20%,
        $color-main-dark-active 70%,
        $color-main-dark-enhanced 120%
    );
    color: $color-main-light;
    font-size: 13pt;
    text-align: right;
    visibility: hidden;
    transform: translateX(-100%);
    pointer-events: none;
    transition:
        visibility $transition-medium-set,
        transform $transition-medium-set;

    &.enabled {
        visibility: visible;
        transform: translateX(0);
        pointer-events: auto;
    }

    .load-items-btn {
        @include admin-button();
        margin-top: 6px;
    }
}

.product-quantity-selector {
    $counter-gap: 3px;
    $counter-button-width: 28px;
    $counter-input-width: 60px;

    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 8px;
    position: relative;

    .reduction-message {
        color: $color-warn-light;
        font-size: 11pt;
        text-shadow: 1px 1px 4px rgba($color-additional, 0.5);
        text-align: right;
        line-height: 1.1;
    }
    .product-counter {
        display: flex;
        gap: $counter-gap;

        @mixin counter-button() {
            @include field-shadow($color-main-dark, $color-main-enhanced);
            display: flex;
            justify-content: center;
            align-items: center;
            width: $counter-button-width;
            border: 1px solid $color-main-light-active;
            background-color: #fff;
            color: $color-main-dark;
            font-size: 14pt;
            cursor: pointer;
            user-select: none;
            transition:
                box-shadow $transition-fast-set,
                border-color $transition-fast-set,
                background-color $transition-fast-set,
                color $transition-fast-set;

            &:hover {
                @include field-hover-shadow($color-main-dark, $color-main-enhanced);
                border-color: $color-main-light-active;
                background-color: $color-main-enhanced;
                color: #fff;
            }
            &:active {
                @include field-hover-shadow($color-main-dark, $color-main-enhanced);
                border-color: $color-main-dark;
                background-color: $color-main-enhanced;
                color: $color-main-dark;
            }
            &[disabled] {
                @include field-shadow($color-main-dark, $color-main-enhanced);
                border-color: rgba($color-main-dark, 0.25);
                background-color: $background-color-disabled;
                color: rgba($color-main-dark, 0.25);
                pointer-events: none;
            }
        }

        .decrease-btn {
            @include counter-button();
            border-top-left-radius: 50%;
            border-bottom-left-radius: 50%;
        }
        .increase-btn {
            @include counter-button();
            border-top-right-radius: 50%;
            border-bottom-right-radius: 50%;
        }
        .quantity-input {
            @include designed-field();
            width: $counter-input-width;
            padding: 2px 5px;
            border: 1px solid $color-main-light-active;
            border-radius: 0;
            font-size: 13pt;

            // Скрытие дефолтных стрелочек числового инпута
            appearance: textfield;
            -moz-appearance: textfield;
            -webkit-appearance: none;
        }
        // Скрытие дефолтных стрелочек числового инпута
        .quantity-input::-webkit-outer-spin-button,
        .quantity-input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
    }
    .add-to-cart-box {
        position: relative;
        width: calc($counter-input-width + $counter-button-width * 2 + $counter-gap * 2);

        .add-to-cart-btn {
            @include field-shadow($color-main-dark, $color-main-enhanced);
            width: 100%;
            background-color: $color-green;
            padding: 3px;
            border: 1px solid $color-main-light-active;
            border-radius: 16px;
            color: $color-main-light;
            font-family: 'Roboto', sans-serif;
            font-size: 13pt;
            cursor: pointer;
            user-select: none;
            transition:
                box-shadow $transition-fast-set,
                border-color $transition-fast-set,
                background-color $transition-fast-set,
                color $transition-fast-set;
    
            .icon {
                display: inline-block;
                width: 22px;
                height: 22px;
                margin-right: 0.3em;
                vertical-align: middle;
                border-radius: 50%;
                background-color: #fff;
                color: $color-green;
                font-size: 13pt;
                text-align: center;
                user-select: none;
                transition:
                    background-color $transition-fast-set,
                    color $transition-fast-set;
            }

            &:hover {
                @include field-hover-shadow($color-green, $color-main-enhanced);
                border-color: $color-green;
                background-color: #fff;
                color: $color-green;
            }
            &:active {
                @include field-hover-shadow($color-main-dark, $color-main-enhanced);
                border-color: rgba($color-main-dark, 0.15);
                background-color: $color-green;
                color: #fff;

                .icon {
                    background-color: $color-green;
                    color: #fff;
                }
            }
            &[disabled] {
                @include field-shadow($color-main-dark, $color-main-enhanced);
                border-color: rgba($color-main-dark, 0.15);
                background-color: color.mix(#fff, $color-green, 50%);
                color: $color-main-light;
                pointer-events: none;

                .icon {
                    background-color: $color-main-light;
                    color: color.mix(#fff, $color-green, 50%);
                }
            }
        }
        .badge-box.single-badge {
            @include badge-box-base();
            position: absolute;
            left: calc(100% - 8px);
            top: -6px;

            .badge {
                min-width: 21px;
                height: 21px;
                padding: 0 5px;
                border-radius: 14px;
                font-size: 11pt;
            }
        }
    }
}

.order-card {
    position: relative;
    border: 2px solid $border-color-form;
    box-shadow: 0 3px 12px 2px rgba($color-main-inactive, 0.35);

    &.completed {
        border-color: $color-green;
        box-shadow: 0 3px 12px 2px rgba($color-green, 0.35);
    }
    &.cancelled {
        border-color: $color-red;
        box-shadow: 0 3px 12px 2px rgba($color-red, 0.35);
    }

    .active-order-badge {
        position: absolute;
        left: -0.27em;
        top: -0.54em;
        color: $color-orange;
        font-size: 26pt;
        font-weight: bold;
        text-shadow: 0 0 5px rgba($color-warn-dark, 0.3);
        line-height: 1;
        user-select: none;
    }
    .order-summary {
        padding: $order-content-spacing;
        background-color: $color-main-enabled;
        font: 13pt 'Roboto', sans-serif;

        a {
            color: $color-blue;
            text-decoration-color: transparent;
            transition:
                color $transition-fast-set,
                text-decoration-color $transition-fast-set;

            &:hover {
                color: $color-main-enhanced;
                text-decoration-color: $color-main-enhanced;
            }
        }
    }
    .order-info-grid {
        display: grid;
        grid-template-areas:
            "lbl-num lbl-date lbl-total lbl-paid lbl-pay-mtd lbl-pack lbl-deliv-mtd lbl-inv"
            "val-num val-date val-total val-paid val-pay-mtd val-pack val-deliv-mtd val-inv";
        grid-template-columns:
            1fr     // order-number
            1fr     // order-date
            1fr     // order-total
            1fr     // order-paid
            1.2fr   // order-payment-method
            1fr     // order-packing
            1.2fr   // order-delivery-method
            0.7fr;  // order-invoice

        & > * {
            display: flex;
            align-items: center;
            justify-content: center;
            border-top: 1px solid $border-color-form;
            padding: 4px;
            text-align: center;

            &.order-info-value {
                border-bottom: 1px solid $border-color-form;
            }
            &:not(.order-invoice) {
                border-right: 1px solid $border-color-form;
            }
        }

        .order-info-label {
            background-color: rgba($color-blue, 0.08);
            color: $color-main-dark-active;
            font-size: 10pt;
            font-weight: bold;

            &.order-number {
                grid-area: lbl-num;
            }
            &.order-date {
                grid-area: lbl-date;
            }
            &.order-total {
                grid-area: lbl-total;
            }
            &.order-paid {
                grid-area: lbl-paid;

                .paid-wrapper { // Обёртка нужна для правильного переноса
                    .info {
                        position: relative;
                        top: -4px;
                        color: $color-blue;
                        font-size: 11pt;
                        cursor: default;
                    }
                }
            }
            &.order-payment-method {
                grid-area: lbl-pay-mtd;
            }
            &.order-packing {
                grid-area: lbl-pack;
            }
            &.order-delivery-method {
                grid-area: lbl-deliv-mtd;
            }
            &.order-invoice {
                grid-area: lbl-inv;
            }
        }
        .order-info-value {
            background-color: rgba(255, 255, 255, 0.5);
            color: $color-main-dark;
            font-size: 12pt;
            overflow-wrap: anywhere;
            
            &.order-number {
                grid-area: val-num;
            }
            &.order-date {
                grid-area: val-date;
            }
            &.order-total {
                grid-area: val-total;
            }
            &.order-paid {
                grid-area: val-paid;

                .paid-wrapper { // Обёртка нужна для правильного переноса
                    .balance {
                        position: relative;
                        top: -8px;
                        font-size: 8pt;
    
                        &.positive {
                            color: $color-green;
                        }
                        &.negative {
                            color: $color-red;
                        }
                    }
                }
            }
            &.order-payment-method {
                grid-area: val-pay-mtd;

                .payment-method-wrapper { // Обёртка нужна для правильного переноса
                    .card-online-payment-link {
                        @include designed-link();
                        margin-left: 0.3em;
                    }
                    .online-transaction-process {
                        display: inline-block;
                        padding: 2px;
                        border: 1px solid $color-green;
                        border-radius: 2px;
                        background-color: rgba(#fff, 0.5);
                        color: $color-brown;
                        font-size: 10pt;
                        font-style: italic;
                        line-height: 1.1;
                    }
                }
            }
            &.order-packing {
                grid-area: val-pack;
            }
            &.order-delivery-method {
                grid-area: val-deliv-mtd;
            }
            &.order-invoice {
                grid-area: val-inv;

                .download-invoice-btn {
                    font-size: 11pt;
                }
            }
        }
    }
    .order-meta {
        display: flex;
        justify-content: space-between;
        gap: $main-content-spacing;
        align-items: center;
        padding: $order-content-spacing;
        background-color: $background-color-form;

        & > *:only-child { // Если элемент внутри блока один, он сдвигается вправо
            margin-left: auto;
        }

        .order-state-summary {
            color: color.mix($color-main-dark-active, $color-main-dark, 50%);
            font-size: 12pt;

            &:only-child { // Если один, то всегда слева
                margin-left: 0;
            }

            p {
                &:not(:last-child) {
                    margin-bottom: 6px;
                }
                &.current-state {
                    .order-status-label,
                    .financials-state-label {
                        @include order-intent();
                    }
                }
                &.last-financials-event {
                    @include last-financials-event();
                }
            }
        }
        .order-management-notes {
            .note {
                .note-popup {
                    left: -50%;
                }
            }
        }
        .order-actions {
            display: flex;
            gap: $main-content-spacing;

            .update-order-btn,
            .repeat-order-btn,
            .order-details-inline-btn {
                @include admin-button();
                width: 142px;
            }
        }
    }
    .order-details-inline-collapsible {
        .context-indicator {
            border-top: 1px solid $border-color-form;
            background-color: rgba($color-main-light, 0.5);
        }
        .order-details-inline {
            .customer-info {
                .customer-info-header {
                    @include main-content-header($header-content-min-height-small, $color-brown-light);
                    border-top: 1px solid $border-color-form;
                    border-bottom: 1px solid $border-color-form;
                }
                .customer-info-summary {
                    padding: $order-content-spacing;
                    background-color: rgba($color-main-light, 0.5);
                    font-size: 12pt;

                    p {
                        display: flex;

                        &:not(:last-child) {
                            margin-bottom: 4px;
                        }

                        .label-col {
                            flex-shrink: 0;
                            width: 136px;
                            color: $color-main-dark-enhanced;
                        }
                        .value-col {
                            color: $color-main-dark;
                            overflow-wrap: anywhere;
                        }
                    }
                }
            }
            .order-details-inline-items {
                .order-details-inline-items-header {
                    @include main-content-header($header-content-min-height-small, $color-brown-light);
                    border-top: 1px solid $border-color-form;
                    border-bottom: 1px solid $border-color-form;
                }
                .order-details-inline-items-table {
                    $product-thumb-size: $product-thumb-small-size;
                    $cell-thumb-width: $product-thumb-size + $entity-table-cell-padding-x * 2;

                    @include entity-table-base();
                    margin-top: 4px;

                    .table-header {
                        color: $color-main-dark-active;
                    }
                    .table-header,
                    .table-row-main {
                        border-left: none;
                        border-right: none;
                        grid-template-columns:
                            $cell-thumb-width  // thumb
                            1fr                // sku
                            4fr                // title
                            1.2fr              // price
                            0.8fr              // discount
                            1fr                // quantity
                            1.2fr;             // total-price

                        .row-cell {
                            &.thumb {
                                .product-thumb {
                                    width: $product-thumb-size;
                                    height: $product-thumb-size;
                                    background-color: $color-main-light;
                                    user-select: none;
    
                                    .product-thumb-img {
                                        width: 100%;
                                        height: 100%;
                                        object-fit: contain;
                                        vertical-align: middle;
                                    }
                                }
                            }
                            &.sku {
                                min-width: 120px;
                            }
                            &.discount {
                                min-width: 64px;
                            }
                            &.quantity {
                                min-width: 100px;
                            }
                            
                            .cell-content {
                                max-height: $product-thumb-size;
                                overflow: auto;
                            }
                        }
                    }
                }
                .order-details-inline-items-summary {
                    display: flex;
                    flex-direction: column;
                    align-items: flex-end;
                    padding: $order-content-spacing;
                    background-color: rgba($color-main-light, 0.5);
                    font: 11pt Arial, sans-serif;

                    p {
                        display: flex;

                        &:not(:last-child) {
                            margin-bottom: 2px;
                        }
                        &.total-amount-summary {
                            font-weight: bold;
                        }

                        .label-col {
                            width: 180px;
                            color: $color-main-dark-enhanced;
                        }
                        .value-col {
                            width: 180px;
                            color: $color-main-dark;
                        }
                    }
                }
            }
        }
    }
}

.order-management-controls {
    & > :last-child {
        border-bottom: 1px solid $border-color-form;
    }
    
    .order-status-panel > .order-status-panel-container,
    .financials-status-panel > .financials-status-panel-container,
    .internal-note-panel > .internal-note-panel-container,
    .audit-logs-panel > .audit-logs-panel-container {
        padding: $order-content-spacing;
        background-color: rgba($color-main-light, 0.5);
        color: color.mix($color-main-dark-active, $color-main-dark, 50%);
        font-size: 12pt;

        & > *:not(:last-child) {
            margin-bottom: $order-content-spacing;
        }

        .current-order-status,
        .financials-state {
            .value {
                @include order-intent();
            }
        }
        .logs-checkbox-collapsible {
            display: flex;
            align-items: flex-start;

            .logs-collapsible {
                width: 100%;
                margin-left: 0.3em;
    
                textarea {
                    @include designed-field();
                    height: 120px;
                    resize: vertical;
                    background-color: rgba(255, 255, 255, 0.5);
                    font-size: 10pt;
                }
            }
        }
    }
    
    .order-status-panel {
        .order-status-panel-title {
            @include main-content-header($main-content-spacing, $color-blue);
            flex-direction: row;
            border-bottom: 1px solid $border-color-form;

            .badge-box.single-badge {
                @include badge-box-base();

                .badge {
                    margin-top: -8px;
                    min-width: 13px;
                    height: 13px;
                    padding: 0 3px;
                    border-radius: 10px;
                    font-size: 9pt;
                }
            }
        }
        .order-status-panel-container {
            .order-status-steps-checkbox-collapsible {
                display: flex;
                align-items: flex-start;

                .order-status-steps-collapsible {
                    flex-grow: 1;
                    flex-shrink: 0;
                    min-width: 0;
                    margin-left: 0.3em;

                    .order-status-steps {
                        display: grid;
                        grid-template-columns: repeat(auto-fit, 150px);
                        grid-auto-rows: 150px;
                        justify-content: center;
                        gap: 4px;

                        &.grid-pickup {
                            grid-template-areas:
                                "confirmed processing ready-pickup picked-up completed cancelled";
                        }
                        &.grid-delivery {
                            grid-template-areas: 
                                "confirmed processing ready-ship in-transit delivered completed cancelled";
                        }
            
                        .order-status-step {
                            display: flex;
                            flex-direction: column;
                            border: 1px solid $border-color-form;

                            &.step-confirmed       { grid-area: confirmed; }
                            &.step-processing      { grid-area: processing; }
                            &.step-ready-pickup    { grid-area: ready-pickup; }
                            &.step-ready-ship      { grid-area: ready-ship; }
                            &.step-picked-up       { grid-area: picked-up; }
                            &.step-in-transit      { grid-area: in-transit; }
                            &.step-delivered       { grid-area: delivered; }
                            &.step-completed       { grid-area: completed; }
                            &.step-cancelled       { grid-area: cancelled; }
            
                            @mixin order-status-step-intent($color) {
                                border-color: $color;
                
                                .order-status-step-header {
                                    border-bottom: 1px solid $color;
                                    background-color: rgba($color, 0.08);
                
                                    .order-status-step-number {
                                        border-right-color: $color;
                                    }
                                    .order-status-step-label {
                                        color: $color;
                                    }
                                }
                                .order-status-step-controls {
                                    background-color: color.mix(rgba(255, 255, 255, 0.5), $color, 97%);
                
                                    .order-status-step-icon {
                                        color: rgba($color, 0.75);
                                    }
                                }
                            }
            
                            &.highlight { @include order-status-step-intent($color-blue); }
                            &.positive  { @include order-status-step-intent($color-green); }
                            &.neutral   { @include order-status-step-intent($border-color-form); }
                            &.negative  { @include order-status-step-intent($color-red); }
            
                            .order-status-step-header {
                                flex-shrink: 0;
                                display: flex;
                                align-items: center;
                                height: 32px;
                                border-bottom: 1px solid $border-color-form;
                                box-sizing: content-box;
                                background-color: rgba($color-main-inactive, 0.08);
            
                                .order-status-step-number {
                                    flex-shrink: 0;
                                    display: flex;
                                    justify-content: center;
                                    align-items: center;
                                    width: 32px;
                                    height: 100%;
                                    border-right: 1px solid $border-color-form;
                                    box-sizing: content-box;
                                    background-color: rgb(243, 239, 219);
                                    color: $color-additional;
                                    font-size: 14pt;
                                }
                                .order-status-step-label {
                                    display: flex;
                                    justify-content: center;
                                    align-items: center;
                                    width: 100%;
                                    padding: 0 2px;
                                    line-height: 1;
                                    color: $color-main-dark-active;
                                    font-size: 10pt;
                                    font-weight: bold;
                                    text-align: center;
                                }
                                .order-status-form[data-type="rollback"] {
                                    flex-shrink: 0;
                                    height: 100%;

                                    .rollback-order-status-btn {
                                        @include control-button();
                                        width: 22px;
                                        height: 100%;
                                        height: 22px;
                                        padding: 1px 2px;
                                        font-size: 10pt;
                                        cursor: default;
                                    }
                                }
                            }
                            .order-status-step-controls {
                                display: flex;
                                justify-content: center;
                                align-items: center;
                                height: 100%;
                                background-color: rgba(255, 255, 255, 0.5);
            
                                .order-status-form[data-type="change"] {
                                    display: flex;
                                    flex-direction: column;
                                    justify-content: center;
                                    align-items: center;
                                    gap: 16px;
                                    width: 100%;
                                    height: 100%;
                                    padding: 3px;
                                    color: initial;

                                    .form-entry {
                                        display: flex;
                                        flex-direction: column;
    
                                        &.input-number-elem {
                                            .form-entry-field {
                                                input:not([type="file"]) {
                                                    width: 124px;
                                                    height: auto;
                                                    padding: 3px 4px;
                                                    border: 1px solid $color-main-dark;
                                                    font-size: 12pt;
                                                }
                                            }
                                        }
                                        &.textarea-elem {
                                            .form-entry-field {
                                                textarea {
                                                    width: 100%;
                                                    height: 54px;
                                                    padding: 3px 2px;
                                                    resize: vertical;
                                                    font-size: 10pt;
                                                    line-height: 1.1;
                                                }
                                            }
                                        }
                
                                        .form-entry-label {
                                            @include form-entry-label-base();
                                            font-size: 9pt;
                                        }
                                        .form-entry-field {
                                            @include form-entry-field-base();
                
                                            .invalid-message {
                                                left: 0.4em;
                                                top: calc(100% + 0.1em);
                                                width: calc(100% - 0.4em);
                                                text-align: left;
                                                font-size: 8pt;
                                            }
                                        }
                                    }
                                    .update-order-status-btn {
                                        @include control-button();
                                        font-size: 12pt;
                                    }
                                }
                                .order-status-step-icon {
                                    font-size: 26pt;
                                    text-shadow: 2px 2px 6px rgba($color-main-dark-active, 0.4);
                                }
                            }
                        }
                    }
                }
            }
        }
    }

    .financials-status-panel {
        .financials-status-panel-title {
            @include main-content-header($main-content-spacing, $color-blue);
            flex-direction: row;
            border-top: 1px solid $border-color-form;
            border-bottom: 1px solid $border-color-form;

            .badge-box.single-badge {
                @include badge-box-base();

                .badge {
                    margin-top: -8px;
                    min-width: 13px;
                    height: 13px;
                    padding: 0 3px;
                    border-radius: 10px;
                    font-size: 9pt;
                }
            }
        }
        .financials-status-panel-container {
            .financials-summary {
                .info {
                    position: relative;
                    top: -5px;
                    color: $color-blue;
                    font-size: 12pt;
                    cursor: default;
                }
                .net-paid {
                    @include order-intent();
                }
                .total-amount {
                    color: color.mix($color-green, $color-main-dark, 72%);
                }
            }
            .last-financials-event {
                @include last-financials-event();
            }
            .payment-form-checkbox-collapsible,
            .refund-form-checkbox-collapsible,
            .void-event-form-checkbox-collapsible {
                display: flex;
                align-items: flex-start;

                & > .designed-checkbox-container {
                    width: 180px;
                }

                .payment-form-collapsible,
                .refund-form-collapsible,
                .void-event-form-collapsible {
                    flex-grow: 1;
                    flex-shrink: 0;
                    display: flex;
                    justify-content: center;
                    min-width: 0;
                    margin-left: 0.3em;

                    .payment-form,
                    .refund-form,
                    .void-event-form {
                        width: 86%;
                        max-width: 600px;
                        padding: 12px;
                        border: 1px solid $border-color-form;
                        background: $background-color-form;
                        color: initial;
                        
                        .form-body {
                            margin-bottom: 16px;
                            font-size: 13pt;
        
                            .form-entry {
                                display: flex;
                                justify-content: space-between;
                                align-items: center;
                                gap: 8px;
                                padding-bottom: 26px;

                                &.input-number-elem {
                                    .form-entry-field {
                                        width: 160px;
                                    }
                                }
                                &.textarea-elem {
                                    align-items: flex-start;
                
                                    .form-entry-label {
                                        margin-top: 0.4em;
                                    }
                                    textarea {
                                        height: 120px;
                                        resize: vertical;
                                    }
                                }
                
                                .form-entry-label {
                                    @include form-entry-label-base();
                                    width: 30%;
                                }
                                .form-entry-field {
                                    @include form-entry-field-base();
                                    width: 70%;
                
                                    .invalid-message,
                                    .note {
                                        left: 0.4em;
                                        top: calc(100% + 0.1em);
                                        width: calc(100% - 0.4em);
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    
    .internal-note-panel {
        .internal-note-panel-title {
            @include main-content-header($main-content-spacing, $color-blue);
            border-top: 1px solid $border-color-form;
            border-bottom: 1px solid $border-color-form;
        }

        .internal-note-panel-container {
            .internal-note-form-checkbox-collapsible {
                display: flex;
                align-items: flex-start;

                & > .designed-checkbox-container {
                    width: 180px;
                }

                .internal-note-form-collapsible {
                    flex-grow: 1;
                    flex-shrink: 0;
                    display: flex;
                    justify-content: center;
                    min-width: 0;
                    margin-left: 0.3em;

                    .internal-note-form {
                        width: 86%;
                        max-width: 600px;
                        padding: 12px;
                        border: 1px solid $border-color-form;
                        background: $background-color-form;
                        color: initial;
                        
                        .form-body {
                            margin-bottom: 16px;
                            font-size: 13pt;
        
                            .form-entry {
                                display: flex;
                                justify-content: space-between;
                                align-items: center;
                                gap: 8px;
                                padding-bottom: 26px;

                                &.textarea-elem {
                                    align-items: flex-start;
                
                                    .form-entry-label {
                                        margin-top: 0.4em;
                                    }
                                    textarea {
                                        height: 120px;
                                        resize: vertical;
                                    }
                                }
                
                                .form-entry-label {
                                    @include form-entry-label-base();
                                    width: 30%;
                                }
                                .form-entry-field {
                                    @include form-entry-field-base();
                                    width: 70%;
                
                                    .invalid-message {
                                        left: 0.4em;
                                        top: calc(100% + 0.1em);
                                        width: calc(100% - 0.4em);
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }

    .audit-logs-panel {
        .audit-logs-panel-title {
            @include main-content-header($main-content-spacing, $color-blue);
            border-top: 1px solid $border-color-form;
            border-bottom: 1px solid $border-color-form;
        }
    }
}

.order-management-notes {
    white-space: nowrap;

    .note {
        display: inline-block;
        position: relative;

        &:not(:last-child) {
            margin-right: $order-content-spacing;
        }
        &:hover {
            .note-popup {
                visibility: visible;
                opacity: 1;
            }
        }

        .note-badge {
            font-size: 21pt;
            line-height: 1;
            cursor: help;
            user-select: none;

            &.customer-comment { color: $color-blue; }
            &.internal-note { color: $color-warn-dark; }
            &.cancellation-reason { color: $color-red; }
        }
        .note-popup {
            position: absolute;
            left: auto; // Изменяемое значение
            bottom: calc(100% + 6px);
            width: 380px;
            max-height: 120px;
            border: 1px solid rgba($color-main-dark-active, 0.5);
            border-radius: 4px;
            box-shadow: 1px 2px 6px rgba(0,0,0,0.2);
            padding: 0.5em 0.7em;
            z-index: 10;
            background-color: $color-main-enabled;
            color: $color-main-dark;
            font-size: 12pt;
            white-space: pre-wrap;
            overflow: auto;
            visibility: hidden;
            opacity: 0;
            transition:
                visibility $transition-fast-set,
                opacity $transition-fast-set;

            .note-content {
                display: inline-block;
                margin-top: 0.5em;
                font-style: italic;
            }

        }
    }
}

.download-invoice-btn {
    width: 1.25em;
    padding: 0;
    margin: 0;
    border: none;
    box-shadow: none;
    background: none;
    color: $color-green;
    font-size: inherit;
    text-decoration: none;
    line-height: 1.25;
    cursor: pointer;

    &:active {
        background-color: rgba($color-green-light, 0.3);
    }
}

.floating-cart {
    display: flex;
    gap: 2px;
    position: fixed;
    right: $main-content-spacing;
    border-radius: 50%;
    z-index: 101;
    transition: bottom $transition-fast-set;

    .cart-link {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 48px;
        height: 48px;
        border: 1px solid $color-main-light-active;
        border-radius: 50%;
        background-color: $color-main-light;
        box-shadow: 0 2px 8px rgba($color-main-dark, 0.5);
        text-decoration: none;
        cursor: pointer;
        transition: background-color $transition-fast-set;

        &:hover {
            background-color: $color-main-enhanced;
    
            .icon {
                color: $color-main-light;
            }
        }
    
        &:active {
            background-color: $color-main-enhanced;
    
            .icon {
                color: $color-blue;
            }
        }
    
        .icon {
            color: $color-green;
            font-size: 22pt;
            line-height: 1;
            transform: translateY(5px);
            user-select: none;
            transition: color $transition-fast-set;
        }
    }
    
    .badge-box {
        @include badge-box-base();
        align-items: flex-end;
    }
}

.breadcrumbs-nav {
    align-self: flex-start;
    padding: 10px;
    font-size: 11pt;

    .prev-link-crumb {
        display: inline-block;
        text-decoration: none;
        @include link-transition($color-main-dark, $color-main-enhanced);

        .icon {
            margin-right: 0.4em;
        }
        .label {
            text-decoration: underline;
        }
    }

    ul {
        display: flex;
        list-style: none;

        li {
            display: inline-flex;
            align-items: center;

            &:not(:last-child) {
                margin-right: 0.4em;
            }

            .breadcrumb-separator {
                margin-right: 0.4em;
                color: rgb(60, 60, 65);
            }
            .link-crumb {
                @include link-transition($color-main-dark, $color-main-enhanced);
            }
            .last-crumb {
                color: $color-main-dark-active;
            }
        }
    }
}

.page-menu {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 80%;

    .menu-box {
        font-size: 16pt;

        ul {
            li {
                a {
                    @include link-transition($color-additional, $color-main-enhanced);
                }
            }
        }
    }
}

/// General Layout ///

.layout {
    display: flex;
    flex-direction: column;
    position: relative;
    min-height: 100vh;
    z-index: 0;
    
    .background-wrapper {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        z-index: -1;
        pointer-events: none;
        user-select: none;
    
        .bg-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
            display: block;
        }
        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(246, 250, 255, 0.94);
        }
    }
}

.main-header {
    position: sticky;
    top: 0;
    background-color: #fff;
    color: $color-main-light;
    z-index: 100;

    &.medium-screen {
        .header-main-panel {
            .auth-wrapper {
                flex: 0 1 50%;
            }
        }
    }

    .header-main-panel {
        display: flex;
        justify-content: space-between;
        align-items: center;
        width: 100%;
        height: $header-main-panel-height;
        background-color: $background-color-header;
        box-shadow: 0 6px 6px -6px $background-color-header;

        &.dashboard-panel-active {
            box-shadow: none;
        }
        
        & > *:not(.resource-loader, .burger-menu-container) {
            flex: 0 1 100%;
        }
        & > :is(.resource-loader, .burger-menu-container) {
            flex: none;
        }
    }

    .resource-loader {
        display: flex;
        justify-content: center;
        align-items: center;
        width: $header-main-panel-height;
        height: $header-main-panel-height;
        position: relative;
        background: color.mix(#fff, $color-blue, 92%);

        .logo-image {
            height: 100%;
            position: absolute;
            opacity: 0;
            transition: opacity $transition-fast-set;

            &.visible {
                opacity: 1;
            }
        }
        .resource-loader-spinner {
            position: absolute;
            opacity: 0;
            visibility: hidden;
            transition:
                visibility $transition-fast-set,
                opacity $transition-fast-set;

            &.visible {
                visibility: visible;
                opacity: 1;
            }
        }
    }

    .main-title {
        position: relative;
        min-width: 280px;
        height: 100%;
        background-color: $background-color-menu;

        .main-title-background-image {
            position: absolute;
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 50%;
        }
        h1 {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;

            a {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
                color: $color-main-light;
                font-size: 32px;
                font-weight: bold;
                text-shadow: 1px 1px 3px rgba($color-main-enhanced, 0.75);
                text-transform: uppercase;
                text-decoration: none;
                white-space: nowrap;
            }
        }
    }

    .main-nav {
        ul {
            display: flex;
            justify-content: space-evenly;
            gap: $nav-items-min-space;
            padding: 0 $nav-items-min-space;
            list-style: none;

            & > li {
                position: relative;
                display: flex;
                align-items: center;
                transition:
                    background-color $transition-fast-set,
                    box-shadow $transition-fast-set;
    
                &:hover {
                    background-color: $background-color-header-active;
                    box-shadow: inset 0 -2px 0 0 $color-main-light;
                }
                &.featured:not(:hover) {
                    box-shadow:
                        inset 0 0 0 0 rgba(0, 0, 0, 0),
                        0 0 2px 2px rgb(228, 238, 240, 0.25);
                }
                &.featured:hover {
                    box-shadow:
                        inset 0 -2px 0 0 $color-main-light,
                        0 0 2px 2px rgb(228, 238, 240, 0.25);
                }
                &.active {
                    background-color: $background-color-header-active;

                    a {
                        color: $color-main-light-active;
                    }
                }
    
                a {
                    width: 100%;
                    padding: 10px 6px;
                    color: $color-main-light;
                    font-size: 16px;
                    text-decoration: none;
                    white-space: nowrap;
                }
    
                &.has-dropdown {
                    a {
                        padding-right: 20px;
                    }
    
                    &::after {
                        content: "▼";
                        position: absolute;
                        right: 4px;
                        top: 50%;
                        transform: translateY(-50%);
                        font-size: 12px;
                        transition: transform $transition-fast-set;
                        pointer-events: none;
                    }

                    &:hover {
                        &::after {
                            transform: translateY(-50%) rotate(180deg);
                        }
                    }
                }
            }
        }
    }

    .dashboard-nav {
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 0 $nav-items-min-space;

        ul {
            display: flex;
            gap: $nav-items-min-space;
            list-style: none;

            li {
                display: flex;
                align-items: center;
                transition:
                    background-color $transition-fast-set,
                    box-shadow $transition-fast-set;

                &:hover {
                    box-shadow: inset 0 -2px 0 0 $color-additional;
                }
                &.featured:not(:hover) {
                    box-shadow:
                        inset 0 0 0 0 rgba(0, 0, 0, 0),
                        0 0 2px 2px rgba($color-additional, 0.5);
                }
                &.featured:hover {
                    box-shadow:
                        inset 0 -2px 0 0 $color-additional,
                        0 0 2px 2px rgba($color-additional, 0.5);
                }

                &.active a {
                    color: $color-main-light-active;
                }
                a {
                    width: 100%;
                    padding: 10px 6px;
                    white-space: nowrap;
                    text-decoration: none;
                    color: $color-main-light;
                    font-size: 16px;
                }
            }
        }
    }

    .auth-wrapper {
        .auth-nav {
            width: fit-content;
            max-width: 380px;
            min-width: 140px;
            max-height: $header-main-panel-height;
            margin: 0 auto;
            padding: 10px;
            background-color: $background-color-menu;
            font-size: 13px;

            ul {
                display: flex;
                list-style: none;

                li {
                    &:not(:first-child) {
                        margin-left: 16px;
                    }
                    
                    a {
                        color: $color-main-light;
                        text-decoration: none;
                        transition: color $transition-fast-set;
    
                        &.user-name {
                            margin-left: 5px;
                            color: $color-additional;
                            text-decoration: underline;
                            overflow-wrap: anywhere;
                        }
                        &:hover {
                            color: $color-main-enhanced;
                        }
                    }
                    &.active a {
                        color: $color-main-light-active;
                    }
    
                    .logout-btn {
                        background: none;
                        border: none;
                        font: inherit;
                        color: $color-main-light;
                        cursor: pointer;
                        transition: color $transition-fast-set;
    
                        &:hover {
                            color: $color-main-enhanced;
                        }
                    }
                }
            }
        }
    }
    
    .dashboard-panel {
        display: flex;
        height: $header-dashboard-panel-height;

        &.admin-role {
            @include dashboard-panel-role-colors($color-blue, $color-blue-light);
        }
        &.customer-role {
            @include dashboard-panel-role-colors($color-brown, $color-brown-light);
        }

        .dashboard-header {
            flex: 1 1 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 0 $main-content-spacing;
            overflow-wrap: anywhere;
        }
        .dashboard-nav {
            flex: 1 1 50%;
        }
    }

    .burger-menu-container {
        position: relative;
        height: 100%;

        &.menu-open {
            .burger-menu-btn {
                &:hover,
                &:active {
                    .icon {
                        color: $color-red;
                    }
                }
            }
            .burger-menu {
                visibility: visible;
                opacity: 1;
                transform: scale(100%);
            }
        }
        
        .burger-menu-btn {
            display: inline-flex;
            align-items: center;
            height: 100%;
            padding: 0 0.4em;
            border: none;
            background-color: $background-color-menu;
            color: $color-main-light;
            font-family: 'Roboto', sans-serif;
            font-size: 16pt;
            cursor: pointer;
            transition:
                background-color $transition-fast-set,
                box-shadow $transition-fast-set;

            &:hover {
                background-color: $background-color-menu-active;

                .icon {
                    color: $color-main-enhanced;
                }
            }
            &:active {
                background-color: $background-color-menu-active;
                box-shadow: inset 0 0 3px 0 $color-blue;

                .icon {
                    color: $color-main-enhanced;
                }
                .title {
                    color: $color-blue;
                }
            }
            
            .icon {
                width: 19px;
                margin-right: 0.4em;
                line-height: 1.25;
                transition: color $transition-fast-set;
            }
            .title {
                transition: color $transition-fast-set;
            }
        }

        .burger-menu {
            position: absolute;
            left: 0;
            top: 100%;
            max-height: calc(100vh - $header-main-panel-height);
            max-height: calc(100dvh - $header-main-panel-height);
            overflow-y: auto;
            overflow-x: hidden;
            background-color: $background-color-header;
            visibility: hidden;
            opacity: 0;
            transform-origin: 0 0;
            transform: scale(0);
            transition:
                visibility $transition-fast-set,
                opacity $transition-fast-set,
                transform $transition-fast-set;

            .main-nav {
                ul {
                    flex-direction: column;
                    gap: 6px;
                    padding: 10px;
                }
            }
            .dashboard-nav {
                padding: 0;

                &.admin-role li {
                    @include dashboard-nav-role-colors($color-blue, $color-blue-light);
                }
                &.customer-role li {
                    @include dashboard-nav-role-colors($color-brown, $color-brown-light);
                }

                ul {
                    flex-direction: column;
                    gap: 6px;
                    width: 100%;
                    padding: 10px;
                }
            }
            a {
                padding: 8px 6px;
            }
        }
    }

    .badge-box {
        @include badge-box-base();
        height: 20px;
        transform: translateX(3px);

        &.single-badge {
            height: auto;
            transform: translate(3px, -7px);
        }
    }
}

main {
    flex: 1; // Растягивает контейнер по высоте на всё свободное пространство
    display: flex;
    flex-direction: column;

    .page-content {
        flex: 1; // Растягивает контейнер по высоте на всё свободное пространство
        display: flex;
        justify-content: center;
        padding: $main-content-spacing;
    }
}

.main-footer {
    padding: 15px 0;
    background-color: $color-main-dark;
    color: $color-main-light;
    text-align: center;

    .footer-content {
        display: flex;
        justify-content: space-around;
        max-width: 1400px;
        margin: 0 auto;
        padding: 0 10px;

        .splitter {
            width: 1px;
            margin: 0 8px;
            background-color: rgb(82, 87, 87);
        }
        .letter-enhance {
            color: $color-main-enhanced;
        }
        a {
            color: $color-main-light;
            text-decoration: none;
            transition: color $transition-fast-set;
        
            &:hover {
                color: $color-main-enhanced;
            }
        }
    }
}

/// Page Contents ///

.home-page {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 80%;
    font-size: 16pt;

    & > * {
        margin-bottom: $main-content-spacing;
    }

    .home-hero {
        position: relative;
        width: fit-content;
        border: 1px solid $color-main-dark-inactive;

        .home-banner-image {
            max-width: 100%;
            max-height: 100%;
            vertical-align: middle;
        }
        .home-hero-text {
            position: absolute;
            right: 0;
            top: 18%;
            padding-right: 20px;
            color: $color-main-dark;
            font-size: 12pt;
            font-weight: bold;
            font-style: italic;
            text-align: right;

            p {
                &.title {
                    text-decoration: underline;
                }
                &:not(:last-child) {
                    margin-bottom: 20px;
                }

                .letter-enhance {
                    color: $color-main-enhanced;
                }
            }
        }
    }

    .home-search-bar,
    .home-working-hours,
    .home-info {
        width: 60%;
        max-width: 1165px; // Ширина изображения home-banner-image
    }
    
    .home-search-bar {
        @include toolbar-item();
        padding: 10px;

        & > *:not(:last-child) {
            margin-bottom: 10px;
        }

        .search-title {
            font-size: 12pt;
            text-align: justify;

            .warn {
                color: $color-warn-dark;
            }
        }
        .search-controls {
            display: flex;
            align-items: center;
    
            input[type="search"] {
                @include designed-field();
                font-size: 13pt;
    
                &::placeholder {
                    font-size: 11pt;
                }
            }
            .search-btn {
                @include control-button();
                width: 120px;
                margin-left: 10px;
                padding: 4px 6px;
                background-color: rgba($color-additional, 0.75);
                font-size: 13pt;
                box-shadow: 2px 2px 3px 0 rgba($color-main-dark, 0.5);

                &:active {
                    background-color: color.mix($color-main-light, $color-additional, 95%);
                    box-shadow: 1px 1px 1px 0 rgba($color-main-dark, 0.5);
                }
            }
        }
        .search-help {
            color: $color-warn-dark;
            font-size: 9pt;
            text-align: justify;
        }
    }

    .home-onboarding {
        .home-onboarding-title {
            margin-bottom: 6px;
        }
        .home-onboarding-list {
            text-align: justify;
        }
    }

    .home-nav-catalog {
        margin-top: $main-content-spacing;
        text-align: center;

        .nav-catalog-btn {
            @include control-button();
            padding: 4px 6px;
            background-color: rgba($color-blue, 0.65);
            box-shadow: 2px 2px 3px 0 rgba($color-main-dark, 0.5);

            &:active {
                background-color: color.mix($color-main-light, $color-blue, 95%);
                box-shadow: 1px 1px 1px 0 rgba($color-main-dark, 0.5);
            }
        }
    }

    .home-working-hours {
        margin-top: $main-content-spacing;

        .home-working-hours-title {
            margin-bottom: 6px;
        }
        p {
            color: $color-main-dark-active;
            font-size: 14pt;

            .time {
                color: $color-green;
            }
            .closed {
                color: $color-red;
            }
        }
    }

    .home-info {
        text-align: justify;

        .home-info-title {
            margin-bottom: 6px;
        }
    }
}

.about-shop-page {
    display: flex;
    flex-direction: column;
    width: 80%;

    .about-shop-header {
        @include main-content-header($header-content-min-height-large, $background-color-header);
    }

    .about-shop-main {
        margin-top: $main-content-spacing;
        font-size: 16pt;
        text-align: justify;

        .about-shop-image {
            max-width: 50%;
            float: left;
            margin: 0 16px 4px 0;
        }
        ul.no-list-markers {
            list-style-type: none;
        }
        .clear-float {
            clear: both;
        }
        .marked-text {
            position: relative;

            span.ml-large {
                display: inline-block;
            }
        }
        .icon-marker {
            position: absolute;
            left: 0;
            top: 0;
        }
        .mt-short {
            margin-top: 0.5em;
        }
        .mb-short {
            margin-bottom: 0.5em;
        }
        .mt-large {
            margin-top: 1.5em;
        }
        .ml-large {
            margin-left: 2em;
        }
        .color-green {
            color: $color-green;
        }
        .color-blue {
            color: $color-blue;
        }
        .email-link {
            @include link-transition($color-additional, $color-main-enhanced);
        }
        .letter-enhance {
            color: $color-main-enhanced;
        }
    }
}

.news-page {
    display: flex;
    flex-direction: column;
    width: 80%;

    .news-header {
        @include main-content-header($header-content-min-height-large, $background-color-header);
    }

    .news-main {
        flex: 1; // Растягивает контейнер по высоте на всё свободное пространство

        .news-load-status {
            @include load-status-overlay();
            padding-top: $main-content-spacing;
        }

        .news-list {
            list-style: none;

            .news-item {
                margin: 40px 0;
                
                .news-card {
                    position: relative;
                    padding: $main-content-spacing 26px;
                    border: 2px solid rgba($color-main-dark, 0.3);
                    border-radius: 16px;
        
                    .news-date {
                        display: inline-block;
                        position: absolute;
                        left: 5%;
                        top: 0;
                        transform: translateY(-50%);
                        padding: 2px 5px;
                        background: $background-color-header-active;
                        color: $color-main-light;
                        font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
                        font-size: 13pt;
                        letter-spacing: -0.02em;
                    }
        
                    .news-title {
                        margin-top: 12px;
                        font-size: 20pt;
                        text-decoration: underline $color-additional;
                        text-align: center;
                    }
        
                    .news-content {
                        width: 100%;
                        font-size: 16pt;
                        text-align: justify;
                    }
        
                    .news-meta {
                        margin-bottom: 4px;
                        font-size: 9pt;
                        text-align: right;
                    }
        
                    .news-controls {
                        position: absolute;
                        right: 5%;
                        bottom: 0;
                        transform: translateY(50%);
        
                        button {
                            @include admin-button();
                            width: 124px;
                            
                            &:not(:first-child) {
                                margin-left: $main-content-spacing;
                            }
                            &.delete-news-btn:not([disabled]) > .icon {
                                color: $color-red;
                            }
                        }
                    }
                }
            }
        }
    }
}

.promos-page {
    display: flex;
    flex-direction: column;
    width: 80%;

    .promos-header {
        @include main-content-header($header-content-min-height-large, $background-color-header);
    }

    .promos-main {
        flex: 1; // Растягивает контейнер по высоте на всё свободное пространство

        .promos-load-status {
            @include load-status-overlay();
            padding-top: $main-content-spacing;
        }

        .promo-list {
            list-style: none;

            .promo-item {
                margin-bottom: 60px;

                &:first-child {
                    margin-top: $main-content-spacing;
                }

                .promo-card {
                    position: relative;
                    padding: $main-content-spacing $main-content-spacing 0;
                    border-bottom: 2px solid rgba($color-main-dark, 0.3);
                    text-align: center;
        
                    &.active {
                        background: rgba($color-green-light, 0.25);
                    }
                    &.not-started {
                        background: rgba($color-blue, 0.25);
                    }
                    &.ended {
                        background: rgba($color-red-light, 0.25);
                    }
        
                    .promo-title {
                        margin-bottom: $main-content-spacing;
                        font-size: 20pt;
                        text-decoration: underline $color-additional;
                    }
                    .promo-image {
                        margin-bottom: $main-content-spacing;
                        max-width: 100%;
                        max-height: 250px;
                    }
                    .promo-description {
                        margin-bottom: calc($main-content-spacing * 2);
                        font-size: 16pt;
                    }
                    .promo-dates {
                        margin-bottom: $main-content-spacing;
                        font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
                        font-size: 15pt;
        
                        .dates-display {
                            display: inline-block;
                            margin-left: 5px;
                            padding: 2px 5px;
                            background-color: $background-color-header-active;
                            color: $color-main-light;
                            letter-spacing: -0.02em;
                        }
                    }
                    .promo-timer {
                        margin-bottom: $main-content-spacing;
                        font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
                        font-size: 15pt;
        
                        .time-left-display {
                            display: inline-block;
                            width: 240px;
                            margin-left: 5px;
                            padding: 2px 0;
                            background-color: color.mix(#fff, $background-color-menu, 82%);
                            color: rgb(165, 99, 0);
                            letter-spacing: -0.02em;
                        }
                    }
                    .promo-meta {
                        margin-bottom: 12px;
                        font-size: 9pt;
                        text-align: right;
                    }
                    .promo-controls {
                        position: absolute;
                        right: 0;
                        bottom: -2px;
                        transform: translateY(100%);
        
                        button {
                            @include admin-button();
                            width: 124px;
        
                            &:not(:first-child) {
                                margin-left: $main-content-spacing;
                            }
                            &.delete-promo-btn:not([disabled]) > .icon {
                                color: $color-red;
                            }
                        }
                    }
                }
            }
        }
    }
}

.catalog-page {
    display: flex;
    flex-direction: column;
    width: 100%;

    .catalog-header {
        @include main-content-header($header-content-min-height-large, $background-color-header);
    }

    .catalog-main {
        flex: 1; // Растягивает контейнер по высоте на всё свободное пространство
        display: flex;
        gap: $main-content-spacing;
        margin-top: $main-content-spacing;

        .categories {
            $categories-sticky-margin: 4px;
            $categories-controls-height: 28px;

            display: flex;
            flex-direction: column;
            position: sticky;
            top: $header-main-panel-height + $categories-sticky-margin;
            width: 400px;

            &.ready {
                align-self: flex-start; // Снятие растяжки flex для работы sticky
            }
            &.dashboard-panel-active {
                top: $header-main-panel-height + $header-dashboard-panel-height + $categories-sticky-margin;

                .category-list {
                    max-height: calc(
                        100vh
                        - $header-main-panel-height
                        - $header-dashboard-panel-height
                        - $header-content-min-height-small
                        - $categories-controls-height
                        - 2 * $main-content-spacing
                        - 2 * $categories-sticky-margin
                    );
                }
            }

            .categories-header {
                @include main-content-header($header-content-min-height-small, $color-blue);
            }

            .categories-controls {
                display: flex;
                justify-content: space-between;
                gap: 8px;
                height: $categories-controls-height;
                margin: $main-content-spacing 0;

                button {
                    @include control-button();
                    width: 128px;
                    padding: 4px 6px;
                    font-size: 12pt;
                }
            }

            .categories-load-status {
                @include load-status-overlay();
            }

            .category-list {
                max-height: calc(
                    100vh
                    - $header-main-panel-height
                    - $header-content-min-height-small
                    - $categories-controls-height
                    - 2 * $main-content-spacing
                    - 2 * $categories-sticky-margin
                );
                overflow: auto;

                & > li:first-child {
                    margin-top: 0;
                }
            }
            .subcategory-list {
                padding-left: 16px;
            }
            .category-list,
            .subcategory-list {
                list-style: none;
                font-size: 14pt;

                li {
                    margin-top: 4px;

                    .category-item {
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                        padding: 4px 4px;
                        color: $color-main-dark;
                        border: 1px solid $border-color-form;
                        border-radius: 6px;
                        cursor: pointer;
                        transition:
                            border-color $transition-fast-set,
                            background-color $transition-fast-set,
                            color $transition-fast-set;
                        
                        &:hover {
                            border: 1px solid $background-color-menu;
                        }
                        &.expanded {
                            .subcategories-toggle {
                                .icon {
                                    transform: translateY(-1px) rotate(180deg);
                                }
                            }
                        }
                        &.in-selected-path:not(.selected) {
                            background-color: rgba($color-main-dark-active, 0.25);
                        }
                        &.selected {
                            background-color: $background-color-menu;
                            color: $color-main-light;
                        }

                        .category-name {
                            overflow-wrap: anywhere;
                        }
                        .subcategories-toggle {
                            flex-shrink: 0;
                            display: flex;
                            justify-content: center;
                            align-items: center;
                            width: 25px;
                            height: 25px;
                            border: 1px solid $border-color-form;
                            border-radius: 50%;
                            margin-left: 6px;
                            background-color: $color-main-light;
                            overflow: hidden;
                            cursor: default;
                            transition: border-color $transition-fast-set;

                            &:hover {
                                border-color: $background-color-menu;
                            }

                            .icon {
                                line-height: 1;
                                color: $color-main-dark;
                                font-size: 11pt;
                                transform: translateY(1px);
                                transition: transform $transition-medium-set;
                                user-select: none;
                            }
                        }
                    }
                }
            }
        }

        .products {
            display: flex;
            flex-direction: column;
            width: 100%;
            min-width: 0; // Для сжатия элементов в toolbar

            .products-header {
                @include main-content-header($header-content-min-height-small, $color-blue);
            }

            .toolbar.top {
                margin-top: $main-content-spacing;

                .search-controls {
                    width: 400px;
                }
                .filter-controls {
                    .filter-settings {
                        .filter-option {
                            .option-label {
                                width: 100px;
                            }
                        }
                    }
                }
            }

            .products-main {
                margin: calc($main-content-spacing * 1.5) 0;

                .products-load-status {
                    @include load-status-overlay();
                }

                .product-list {
                    $product-card-spacing: 8px;
                    $product-card-width: $product-thumb-medium-size + $product-card-spacing * 2;
                    $zoom-preview-size: $product-card-width + $main-content-spacing * 2;
    
                    display: grid;
                    justify-content: space-between;
                    align-items: flex-start;
                    grid-template-columns: repeat(auto-fit, $product-card-width);
                    grid-gap: $main-content-spacing;
                    list-style: none;
    
                    .product-item {
                        .product-card {
                            position: relative;
                            padding: $product-card-spacing;
                            border-radius: 8px;
                            background-color: $background-color-menu;
                            box-shadow: 0 2px 6px $color-main-dark;
        
                            & > *:not(:first-child) {
                                margin-top: $product-card-spacing;
                            }
        
                            .zoom-preview {
                                position: absolute;
                                left: calc(($zoom-preview-size - $product-card-width) / (-2));
                                top: calc(($zoom-preview-size + 4px) * (-1));
                                width: $zoom-preview-size;
                                height: $zoom-preview-size;
                                border: 1px solid $color-blue;
                                box-shadow: 0 1px 6px $color-main-dark;
                                background-color: $color-main-light;
                                background-repeat: no-repeat;
                                z-index: 3;
                                pointer-events: none;
                            }
        
                            .product-thumb {
                                display: flex;
                                justify-content: center;
                                align-items: center;
                                width: $product-thumb-medium-size;
                                height: $product-thumb-medium-size;
                                outline: 1px solid $color-main-light-active;
                                background-color: $color-main-light;
                                user-select: none;
        
                                a {
                                    position: relative;
                                    outline: 1px solid $color-main-light-active;
                                    cursor: default;
                                    transition: outline-color $transition-fast-set;
            
                                    &:hover {
                                        outline-color: $color-main-enhanced;
                                    }
        
                                    .product-thumb-img {
                                        width: 100%;
                                        height: 100%;
                                        object-fit: contain;
                                        vertical-align: middle;
                                    }
                                    .zoom-lens {
                                        position: absolute;
                                        outline: 1px solid $color-blue;
                                        background-color: rgba($color-blue, 0.2);
                                        pointer-events: none;
                                        z-index: 2;
                                    }
                                }
                            }
                            .product-title {
                                $product-title-height: 3em * 1.25;
                                
                                position: relative;
                                color: $color-main-dark;
                                font-size: 11pt;
        
                                &:hover,
                                &:focus-within {
                                    a {
                                        opacity: 1;
                                        pointer-events: auto;
                                    }
                                }
                                
                                @mixin product-link-content() {
                                    padding: 3px;
                                    background-color: #fff;
                                    text-decoration: none;
                                    box-sizing: content-box;

                                    .badge {
                                        text-align: center;

                                        .brand-new {
                                            padding: 3px;
                                            background-color: $color-warn-light;
                                            color: $color-yellow;
                                        }
                                    }
                                    .title {
                                        text-decoration: underline;
                                    }
                                }

                                .product-title-visual {
                                    @include product-link-content();
                                    height: $product-title-height;
                                    outline: 1px solid $color-main-light-active;
                                    box-shadow: inset 0 0 3px 0px transparent;
                                    overflow: hidden;

                                    // Плавная прозрачность текста внизу
                                    &::after {
                                        content: '';
                                        position: absolute;
                                        left: 0;
                                        bottom: 0;
                                        width: 100%;
                                        height: 1em * 1.25;
                                        background: linear-gradient(to bottom, transparent, #fff);
                                        pointer-events: none;
                                    }
                                }
                                a {
                                    @include product-link-content();
                                    position: absolute;
                                    left: 0;
                                    right: 0;
                                    top: 0;
                                    min-height: $product-title-height;
                                    box-shadow: inset 0 0 3px 0px $color-main-enhanced;
                                    outline: 1px solid $color-main-enhanced;
                                    background-color: color.mix(#fff, $color-main-enabled, 60%);
                                    color: $color-main-enhanced;
                                    opacity: 0;
                                    pointer-events: none;
                                    transition: opacity $transition-fast-set;

                                    &:focus,
                                    &:focus-visible {
                                        opacity: 1;
                                        pointer-events: auto;
                                    }
                                }
                            }
                            .product-prices {
                                display: flex;
                                flex-direction: column;
                                justify-content: flex-end;
                                min-height: 2em * 1.25; // Количество строк на высоту строки (line-height)
                                font-size: 14pt;
        
                                .discount-info {
                                    display: flex;
                                    justify-content: space-between;
                                    align-items: baseline;
                                    gap: 0.4em;
        
                                    .original-price {
                                        color: $color-main-inactive;
                                        font-size: 11pt;
                                        text-decoration: line-through $color-red;
                                    }
                                    .discount {
                                        color: $color-red;
                                        font-weight: bold;
                                    }
                                }
                                .current-price {
                                    display: flex;
                                    align-items: baseline;
                                    color: $color-main-light;
        
                                    .price-unit {
                                        margin-left: 0.3em;
                                        font-size: 12pt;
                                    }
                                }
                            }
                            .product-info {
                                display: flex;
                                justify-content: space-between;
                                align-items: baseline;
                                gap: 6px;
                                font-size: 11pt;
        
                                .product-available {
                                    color: $color-green;
        
                                    &.out-of-stock {
                                        color: $color-red;
                                    }
        
                                    p {
                                        &.restock {
                                            color: $color-blue;
                                            font-size: 10pt;
                                            font-weight: bold;
                                            text-shadow: 1px 1px 3px rgba($color-main-dark, 0.4);
                                        }
                                        
                                        .icon {
                                            margin-right: 0.3em;
                                        }
                                    }
                                }
                                .product-inactive {
                                    color: color.mix($color-additional, $color-red, 75%);

                                    .icon {
                                        margin-right: 0.3em;
                                    }
                                }
                                .product-sku {
                                    color: $color-main-light-active;
                                    font-size: 8pt;
                                    white-space: nowrap;
                                }
                            }
                            .product-quantity-selector {
                                margin: 12px 0 4px;
        
                                .reduction-message {
                                    text-align: center;
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}

.product-details-page {
    display: flex;
    flex-direction: column;
    width: 80%;

    .product-details-header {
        @include main-content-header($header-content-min-height-large, $background-color-header);

        .brand-new {
            padding: 3px;
            background-color: $color-warn-light;
            color: $color-yellow;
            font-size: 12pt;
            line-height: 1;
            vertical-align: text-top;
        }
    }

    .product-details-main {
        display: flex;
        justify-content: center;
        margin-top: $main-content-spacing;

        .product-image-gallery {
            $image-thumb-border-width: 2px;
            $image-thumb-spacing: 6px;
            $gallery-containers-border-width: 1px;
            $image-thumb-count: 5;
            $image-gallery-width: calc(
                ($product-thumb-small-size +  $image-thumb-border-width * 2) * $image-thumb-count +
                $image-thumb-spacing * ($image-thumb-count + 1) +
                $gallery-containers-border-width * 2
            );
            $slide-btn-width: 48px;
            $image-slider-height: calc($image-gallery-width - $slide-btn-width * 2);
    
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            width: $image-gallery-width;

            .image-slider,
            .thumbnails {
                display: flex;
                border: $gallery-containers-border-width solid $color-main-light-active;
                border-radius: 8px;
            }
            
            .image-slider {
                height: $image-slider-height;
                background-color: $color-main-light;
                overflow: hidden;
                user-select: none;

                .slide-btn {
                    flex-shrink: 0;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    width: $slide-btn-width;
                    background-color: color.mix(#fff, $color-main-dark-inactive, 70%);
                    color: $color-main-dark;
                    font-size: 22pt;
                    border: none;
                    cursor: pointer;
                    transition: background-color $transition-fast-set;

                    &.slide-left {
                        border-right: 1px solid $color-main-light-active;
                    }
                    &.slide-right {
                        border-left: 1px solid $color-main-light-active;
                    }

                    &:hover {
                        background-color: color.mix(#fff, $color-main-dark-inactive, 25%);
                    }
                }

                .current-thumb {
                    width: 100%;
                    background-color: rgba(255, 255, 255, 0.5);

                    .current-thumb-img {
                        width: 100%;
                        height: 100%;
                        object-fit: contain;
                        animation: none;

                        &.zoomable {
                            cursor: zoom-in;
                        }
                        &.animate {
                            animation: flashZoom var(--fast-animation-duration) ease-in-out;
                        }
                    }
                      
                    @keyframes flashZoom {
                        0% {
                            border-radius: 2%;
                            opacity: 0.3;
                            transform: scale(0.98);
                        }
                        100% {
                            border-radius: 0;
                            opacity: 1;
                            transform: scale(1);
                        }
                    }
                }
            }

            .thumbnails {
                justify-content: center;
                gap: $image-thumb-spacing;
                flex-wrap: wrap;
                margin-top: $main-content-spacing;
                padding: $image-thumb-spacing;

                .product-details-load-status {
                    @include load-status-overlay();
                }

                .image-thumb {
                    width: $product-thumb-small-size;
                    height: $product-thumb-small-size;
                    border: $image-thumb-border-width solid $color-main-dark-inactive;
                    border-radius: 6px;
                    box-sizing: content-box;
                    box-shadow: 0 0 3px rgba($color-main-dark, 0.25);
                    background-color: $color-main-light;
                    cursor: pointer;
                    overflow: hidden;
                    user-select: none;
                    transition:
                        box-shadow $transition-fast-set,
                        border-color $transition-fast-set;

                    &.current {
                        border-color: $color-blue-light;
                    }

                    &:hover {
                        box-shadow: 0 0 5px rgba($color-main-dark, 0.5);
                    }

                    .thumb-img {
                        width: 100%;
                        height: 100%;
                        object-fit: contain;
                        vertical-align: middle;
                    }
                }
            }
        }

        .product-info {
            width: 600px;
            margin-left: $main-content-spacing;
            border-left: 1px solid $color-additional;
            color: $color-main-dark;
            font-size: 13pt;

            .product-main-info {
                padding-bottom: $main-content-spacing;
                border-bottom: 1px solid $color-additional;

                .product-info-item {
                    &:not(:first-child) {
                        margin-top: $main-content-spacing;
                    }
                    &.sku {
                        padding: 4px 0 4px $main-content-spacing;
                        text-align: right;

                        .sku {
                            padding: 4px 6px;
                            background-color: rgba($color-main-dark, 0.1);
                        }
                    }
                    &.original-price {
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                        gap: $main-content-spacing;
                        padding: 4px 6px 4px $main-content-spacing;
                        background-color: rgba($color-main-dark, 0.1);
    
                        .original-price-value {
                            font-size: 18pt;
                            text-decoration: line-through $color-red;
                        }
                        .discount-details {
                            color: $color-red;
                            font-size: 10pt;
                            line-height: 1.1;
    
                            .discount {
                                margin-left: 0.3em;
                                font-size: 12pt;
                                
                                &.applied {
                                    font-weight: bold;
                                }
                            }
                        }
                    }
                    &.current-price {
                        display: flex;
                        justify-content: space-between;
                        gap: $main-content-spacing;
                        padding-left: $main-content-spacing;
    
                        .current-price-value {
                            flex-shrink: 0;
                            font-size: 21pt;
                            font-weight: bold;
                        }
                        .out-of-stock {
                            align-self: center;
                            padding: 4px 6px;
                            background-color: rgba($color-main-dark, 0.1);
                            color: $color-red;

                            .icon {
                                margin-right: 0.3em;
                            }
                        }
                        .inactive {
                            align-self: center;
                            padding: 4px 6px;
                            background-color: rgba($color-main-dark, 0.1);
                            color: color.mix($color-additional, $color-red, 75%);

                            .icon {
                                margin-right: 0.3em;
                            }
                        }
                        .product-quantity-selector {
                            $counter-gap: 3px;
                            $counter-button-width: 36px;
                            $counter-input-width: 94px;

                            align-items: flex-end;

                            .product-counter {
                                justify-content: flex-start;
            
                                .decrease-btn,
                                .increase-btn {
                                    width: $counter-button-width;
                                    font-size: 19pt;
                                }
                                .quantity-input {
                                    width: $counter-input-width;
                                    padding: 4px 6px;
                                    font-size: 16pt;
                                }
                            }
                            .add-to-cart-box {
                                width: calc(
                                    $counter-input-width +
                                    $counter-button-width * 2 +
                                    $counter-gap * 2
                                );

                                .add-to-cart-btn {
                                    padding: 5px;
                                    border-radius: 20px;
                                    font-size: 16pt;
                        
                                    .icon {
                                        width: 26px;
                                        height: 26px;
                                        font-size: 16pt;
                                    }
                                }
                                .badge-box.single-badge {
                                    left: calc(100% - 12px);
                                    top: -7px;

                                    .badge {
                                        min-width: 26px;
                                        height: 26px;
                                        padding: 0 6px;
                                        border-radius: 16px;
                                        font-size: 15pt;
                                    }
                                }
                            }
                        }
                    }
                }
            }
            .product-additional-info {
                margin: $main-content-spacing 0 0 $main-content-spacing;

                .product-info-item {
                    &:not(:first-child) {
                        margin-top: 12px;
                    }

                    &.available {
                        .value {
                            .restock {
                                color: $color-blue;
                                font-size: 11pt;
                                font-weight: bold;
                                text-shadow: 1px 1px 3px rgba($color-main-dark, 0.4);
                            }
                        }
                    }
                }
            }
            .product-info-item {
                .label {
                    color: $color-main-dark-active;
                    font-weight: bold;
                }
                .value {
                    color: $color-main-dark;
                    margin-left: 0.3em;
                }
            }
        }
    }
}

.delivery-page {
    display: flex;
    flex-direction: column;
    width: 80%;

    .delivery-header {
        @include main-content-header($header-content-min-height-large, $background-color-header);
    }

    .delivery-main {
        margin-top: $main-content-spacing;
        font-size: 16pt;
        text-align: justify;

        ul.no-list-markers {
            list-style-type: none;
        }
        .marked-text {
            position: relative;

            span.ml-large {
                display: inline-block;
            }
        }
        .icon-marker {
            position: absolute;
            left: 0;
            top: 0;
        }
        .mt-short {
            margin-top: 0.5em;
        }
        .mt-large {
            margin-top: 1.5em;
        }
        .ml-large {
            margin-left: 2em;
        }
        .color-orange {
            color: $color-orange;
        }
        .color-green {
            color: $color-green;
        }
        .color-blue {
            color: $color-blue;
        }
        .left-border {
            border-left: 4px solid $color-main-dark-inactive;
            padding-left: 1em;
        }
        .centered-content {
            display: flex;
            flex-direction: column;
            align-items: center;

            & > * {
                width: fit-content;
            }
        }
        .shop-address {
            color: $color-main-dark-enhanced;
            text-decoration: 1px solid underline;
        }
        .email-link {
            @include link-transition($color-additional, $color-main-enhanced);
        }
        .phone-link {
            @include link-transition($color-brown, $color-main-enhanced);
        }
    }
}

.guarantees-page {
    display: flex;
    flex-direction: column;
    width: 80%;

    .guarantees-header {
        @include main-content-header($header-content-min-height-large, $background-color-header);
    }

    .guarantees-main {
        margin-top: $main-content-spacing;
        font-size: 16pt;

        p + p {
            margin-top: 0.5em;
        }
        .doc-link {
            @include link-transition($color-additional, $color-main-enhanced);

            .icon {
                margin-right: 0.4em;
            }
        }
    }
}

.insurance-page {
    display: flex;
    flex-direction: column;
    width: 80%;

    .insurance-header {
        @include main-content-header($header-content-min-height-large, $background-color-header);
    }

    .insurance-main {
        margin-top: $main-content-spacing;
        font-size: 16pt;

        p + p {
            margin-top: 0.5em;
        }
        .doc-link {
            @include link-transition($color-additional, $color-main-enhanced);
            
            .icon {
                margin-right: 0.4em;
            }
        }
    }
}

.licenses-page {
    display: flex;
    flex-direction: column;
    width: 80%;

    .licenses-header {
        @include main-content-header($header-content-min-height-large, $background-color-header);
    }

    .licenses-main {
        margin-top: $main-content-spacing;
        font-size: 16pt;

        p + p {
            margin-top: 0.5em;
        }
        .doc-link {
            @include link-transition($color-additional, $color-main-enhanced);
            
            .icon {
                margin-right: 0.4em;
            }
        }
    }
}

.company-details-page {
    display: flex;
    flex-direction: column;
    width: 80%;

    .company-details-header {
        @include main-content-header($header-content-min-height-large, $background-color-header);
    }

    .company-details-main {
        margin-top: $main-content-spacing;
        font-size: 16pt;

        p + p {
            margin-top: 0.5em;
        }
        .doc-link {
            @include link-transition($color-additional, $color-main-enhanced);
            border: none;
            outline: none;
            background: none;
            font-size: inherit;
            line-height: 1.25;
            text-decoration: underline;
            cursor: pointer;
            user-select: auto;
            
            .icon {
                margin-right: 0.4em;
            }
        }
    }
}

.contacts-page {
    display: flex;
    flex-direction: column;
    width: 80%;

    .contacts-header {
        @include main-content-header($header-content-min-height-large, $background-color-header);
    }

    .contacts-main {
        margin-top: $main-content-spacing;
        font-size: 16pt;

        .icon {
            margin-right: 0.5em;
        }
        .mt-short {
            margin-top: 0.5em;
        }
        .mt-large {
            margin-top: 1.5em;
        }
        .color-blue {
            color: $color-blue;
        }
        .phone-link {
            @include link-transition($color-brown, $color-main-enhanced);
        }
        .email-link {
            @include link-transition($color-additional, $color-main-enhanced);
        }
        .shop-address {
            color: $color-main-dark-enhanced;
            text-decoration: 1px solid underline;
        }
        .working-hours {
            margin-top: 0.2em;
            color: $color-main-dark-active;
            font-size: 14pt;

            .time {
                color: $color-green;
            }
            .closed {
                color: $color-red;
            }
        }
    }
}

.auth-page {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    background-color: rgba($color-main-dark, 0.2);

    .auth-form {
        padding: 32px;
        background: $color-main-light;
        border: 2px solid $color-main-dark;
        border-radius: 12px;

        &[data-type="registration"] { width: 570px; }
        &[data-type="login"] { width: 532px; }

        .form-body {
            margin: 54px 0;
            font-size: 13pt;
            text-align: right;
        
            .form-entry {
                display: flex;
                justify-content: flex-end;
                align-items: center;
                gap: 8px;
                white-space: nowrap;
    
                &:not(:last-of-type) {
                    padding-bottom: 42px;
                }

                .form-entry-label {
                    @include form-entry-label-base();
                    white-space: normal;
                }
                .form-entry-field {
                    @include form-entry-field-base();
                    flex-shrink: 0;
                    width: 280px;
    
                    .invalid-message {
                        left: 0.4em;
                        top: calc(100% + 0.1em);
                        width: calc(100% - 0.4em);
                        text-align: left;
                        white-space: normal;
                    }
                }
            }
        }
    }
}

.catalog-management-page {
    display: flex;
    flex-direction: column;
    width: 100%;

    .catalog-management-header {
        @include main-content-header($header-content-min-height-large, $background-color-header);
    }

    .category-editor {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        gap: $main-content-spacing;
        margin-top: $main-content-spacing;

        .category-selection-panel,
        .category-info-panel,
        .category-control-panel {
            padding: 12px;
            border: 1px solid $border-color-form;
            background-color: $background-color-form;
        }

        .category-selection-panel {
            flex: 0;
            font-size: 11pt;

            .categories-load-status {
                @include load-status-overlay();
                flex-direction: row;
                justify-content: flex-start;
                height: auto;
                min-height: 0;
                margin-bottom: $main-content-spacing;
                border-bottom: 1px solid $border-color-form;
            }

            .category-level {
                margin-top: 4px;
                text-align: right;
                white-space: nowrap;

                .category-label {
                    display: inline-block;
                    white-space: nowrap;

                    &.active {
                        .label-text {
                            color: $color-green;
                        }
                    }

                    .label-count {
                        margin-right: 0.4em;
                    }
                    .label-text {
                        color: $color-main-dark-inactive;
                    }
                    .label-icon {
                        margin: 0 8px;
                    }
                }
    
                select {
                    @include designed-field();
                    width: 264px;
                    padding: 2px 3px;
                    border-width: 1px;
                    border-radius: 3px;
                    font-size: inherit;
                }
            }

            .read-only-category-message {
                max-width: 460px;
                margin-top: 4px;
                padding-left: 0.4em;
                color: $color-red;
                font-size: 9pt;
                text-align: justify;
                text-indent: -0.4em;
                line-height: 1;
            }

            .category-selection-panel-controls {
                display: flex;
                flex-direction: column;
                align-items: flex-end;
                gap: 12px;
                margin-top: $main-content-spacing;

                .designed-checkbox-container {
                    .checkbox-label {
                        width: 100%;
                        white-space: normal;
                    }
                }
                button {
                    @include admin-button();
                    width: 128px;
                    height: $form-field-base-height;
                }
            }
        }

        .category-info-panel,
        .category-control-panel {
            width: 620px;
            font-size: 13pt;

            .panel-row {
                min-height: $form-field-base-height;

                &:not(.panel-title) {
                    display: flex;
                    justify-content: space-between;
                    margin-top: 4px;
                }
            }
        }

        .category-info-panel {
            .panel-row {
                .panel-col  {
                    display: flex;
                    align-items: center;

                    &.panel-row-label {
                        width: 35%;
                        min-width: 108px;
                        letter-spacing: -0.02em;
                        overflow-wrap: anywhere;
                    }
                    &.panel-row-value {
                        width: 65%;
                        margin-left: 8px;
                        padding: 0 8px;
                        background-color: $background-color-form-inactive;
                        border-radius: 4px;
                        color: $color-main-dark;
                        font-weight: bold;
                        word-break: break-all;
                    }
                }
            }
        }

        .category-control-panel {
            .panel-row {
                & > button {
                    @include admin-button();
                    width: 240px;
                    height: $form-field-base-height;
    
                    &.delete-category-btn:not([disabled]) > .icon {
                        color: $color-red;
                    }
                }

                &.category-form-action {
                    flex-direction: column;
                    justify-content: flex-start;
                    
                    .category-form-collapsible {
                        .category-form {
                            margin-top: 4px;
                            padding: 6px;
                            border: 1px solid $border-color-form;
        
                            .form-header {
                                @include main-content-header($header-content-min-height-small, $color-blue);
                            }
                            .form-body {
                                margin: 46px 0;
        
                                .form-entry {
                                    display: flex;
                                    justify-content: space-between;
                                    align-items: center;
                                    gap: 8px;
                                    padding-bottom: 26px;
        
                                    &.input-number-elem {
                                        .form-entry-field {
                                            width: 100px;
                                        }
                                    }
                    
                                    .form-entry-label {
                                        @include form-entry-label-base();
                                        width: 35%;
                                        min-width: 108px;
                                    }
                                    .form-entry-field {
                                        @include form-entry-field-base();
                                        width: 65%;
                        
                                        .invalid-message {
                                            left: 0.4em;
                                            top: calc(100% + 0.1em);
                                            width: calc(100% - 0.4em);
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    
    .product-editor {
        $btn-width: 142px;

        flex: 1;
        display: flex;
        flex-direction: column;
        margin-top: $main-content-spacing * 2;

        .product-creation-panel {
            text-align: center;

            .create-product-btn {
                @include admin-button();
                width: $btn-width;
            }

            .product-form-collapsible {
                display: flex;
                flex-direction: column;
                align-items: center;
            }
        }

        .product-table-section {
            flex: 1;
            display: flex;
            flex-direction: column;
            margin-top: $main-content-spacing * 2;

            .toolbar {
                .filter-controls {
                    .filter-settings {
                        .filter-option {
                            .option-label {
                                width: 100px;
                            }
                        }
                    }
                }
            }

            .product-table {
                $cell-thumb-width: $product-thumb-small-size + $entity-table-cell-padding-x * 2;
                $cell-btn-width: $btn-width + $entity-table-cell-padding-x * 2;
    
                @include entity-table-base();
                margin: $main-content-spacing 0;
    
                .table-header,
                .table-row-main {
                    grid-template-columns:
                        32px               // select
                        $cell-thumb-width  // image
                        0.75fr             // id / sku
                        1fr                // name / brand
                        1fr                // description
                        0.6fr              // stock / unit
                        0.8fr              // price / discount
                        0.8fr              // category
                        0.8fr              // tags
                        $cell-btn-width    // edit
                        $cell-btn-width;   // delete
    
                    .row-cell.stock-unit {
                        min-width: 104px;
                    }
                }
                .table-body {
                    .table-row {
                        .table-row-main {
                            .row-cell {
                               .cell-content {
                                    max-height: calc(5em * 1.25);
                                    overflow: auto;
                                }

                                &.thumb-link {
                                    .cell-content {
                                        overflow: visible;
                                        
                                        .brand-new {
                                            width: $product-thumb-small-size + 2px;
                                            transform: translateX(-1px);
                                            padding: 2px;
                                            background-color: $color-warn-light;
                                            color: $color-yellow;
                                            font-size: 11pt;
                                            line-height: 1;
                                            text-align: center;
                                        }
                                        .product-thumb {
                                            width: $product-thumb-small-size;
                                            height: $product-thumb-small-size;
                                            background-color: $color-main-light;
                                            user-select: none;

                                            a {
                                                outline: 1px solid $color-main-light-active;
                                                transition: outline-color $transition-fast-set;
                        
                                                &:hover {
                                                    outline-color: $color-main-enhanced;
                                                }
                    
                                                .product-thumb-img {
                                                    width: 100%;
                                                    height: 100%;
                                                    object-fit: contain;
                                                    vertical-align: middle;
                                                }
                                            }
                                        }
                                    }
                                }
                                &.id-sku {
                                    .cell-content {
                                        p {
                                            word-break: break-all;

                                            &:not(:last-child) {
                                                margin-bottom: 6px;
                                            }
                                        }
                                    }
                                }
                                &.stock-unit {
                                    .cell-content {
                                        .restock {
                                            color: $color-blue;
                                            font-size: 10pt;
                                            font-weight: bold;
                                            text-shadow: 1px 1px 3px rgba($color-main-dark, 0.4);
                                        }
                                        .reserv {
                                            color: $color-warn-dark;
                                            font-size: 10pt;
                                            text-shadow: 1px 1px 3px rgba($color-main-dark, 0.4);
                                        }
                                    }
                                }
                                &.category {
                                    .cell-content {
                                        .invalid-category {
                                            color: $color-red;
                                        }
                                    }
                                }
                                &.tags {
                                    .cell-content {
                                        font-style: italic;
                                    }
                                }
                                &.edit,
                                &.delete {
                                    .cell-content {
                                        overflow: visible; // Иначе для кнопок в ячейках обрезается тень

                                        button {
                                            @include admin-button();
                                            width: $btn-width;
                            
                                            &.delete-product-btn:not([disabled]) > .icon {
                                                color: $color-red;
                                            }
                                        }
                                        
                                    }
                                }
                            }
                        }
    
                        .table-row-expansion-collapsible {
                            .table-row-expansion {
                                display: flex;
                                flex-direction: column;
                                align-items: center;
                                margin-bottom: $main-content-spacing;
                            }
                        }
                    }
                }
                .table-footer {
                    grid-template-columns:
                        1fr              // select-label
                        $cell-btn-width  // edit-bulk-product
                        $cell-btn-width; // delete-bulk-product

                    button {
                        @include admin-button();
                        width: $btn-width;
                        font-weight: bolder;
        
                        &.delete-bulk-product-btn:not([disabled]) > .icon {
                            color: $color-red;
                        }
                    }
                }
                .bulk-product-form-collapsible {
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                }
            }
        }

        .product-form,
        .bulk-product-form {
            width: 50%;
            padding: 12px;
            border: 1px solid $border-color-form;
            background: $background-color-form;

            .form-header {
                h2 {
                    @include background-header($color-blue);
                }
            }
            .form-body {
                margin: 46px 0;
                font-size: 13pt;
                text-align: left;

                .form-entry {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    gap: 8px;
                    padding-bottom: 26px;

                    .form-entry-checkbox-label {
                        display: flex;
                        align-items: center;

                        .designed-checkbox-container {
                            margin-right: 6px;
                        }

                        .form-entry-label {
                            flex-grow: 1;
                            width: 0;
                        }
                    }

                    &.textarea-elem,
                    &.input-file-elem {
                        align-items: flex-start;
    
                        .form-entry-label {
                            margin-top: 0.4em;
                        }
                        textarea {
                            height: 120px;
                            resize: vertical;
                        }
                    }
                    &.input-number-elem {
                        &.price-field {
                            .form-entry-field {
                                width: 160px;
                            }
                        }

                        .form-entry-field {
                            width: 104px;
                        }
                    }
                    &.select-elem {
                        .form-entry-field {
                            width: auto;
                            min-width: 104px;
                        }
                    }
                    &.checkbox-elem {
                        .form-entry-field {
                            .invalid-message {
                                left: auto;
                                right: 0;
                                width: 100%;
                                text-align: right;
                            }
                        }
                    }
    
                    .form-entry-label,
                    .form-entry-checkbox-label {
                        @include form-entry-label-base();
                        width: 28%;
                    }
                    .form-entry-field {
                        @include form-entry-field-base();
                        width: 72%;
        
                        .invalid-message {
                            left: 0.4em;
                            top: calc(100% + 0.1em);
                            width: calc(100% - 0.4em);
                        }
                    }
                }
            }
        }
    }
}

.customer-management-page {
    display: flex;
    flex-direction: column;
    width: 100%;

    .customer-management-header {
        @include main-content-header($header-content-min-height-large, $background-color-header);
    }

    .customers-notification {
        display: flex;
        flex-direction: column;
        align-items: center;
        margin-bottom: calc($main-content-spacing * 2);

        .customers-notification-controls {
            margin-top: $main-content-spacing;
    
            button {
                @include admin-button();
                width: 180px;
    
                &:not(:last-child) {
                    margin-right: $main-content-spacing;
                }
            }
        }

        .notification-editor-collapsible {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 50%;

            .notification-editor {
                width: 100%;
                border: 1px solid $border-color-form;
        
                .notification-editor-header {
                    @include background-header($color-blue);
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    min-height: 40px;
                    padding: 0 10px;
                    color: $color-main-dark;
                    text-align: center;
                }
        
                .notification-form {
                    margin-top: $main-content-spacing;
                    padding: 12px;
                    background: $background-color-form;

                    .form-body {
                        margin-bottom: 46px;
                        font-size: 13pt;

                        .form-entry {
                            display: flex;
                            justify-content: space-between;
                            align-items: center;
                            gap: 8px;
                            padding-bottom: 26px;
            
                            &.textarea-elem {
                                align-items: flex-start;
            
                                .form-entry-label {
                                    margin-top: 0.4em;
                                }
                                textarea {
                                    height: 120px;
                                    resize: vertical;
                                }
                            }
            
                            .form-entry-label {
                                @include form-entry-label-base();
                                width: 25%;
                            }
                            .form-entry-field {
                                @include form-entry-field-base();
                                display: flex;
                                width: 75%;
                
                                .invalid-message {
                                    left: 0.4em;
                                    top: calc(100% + 0.1em);
                                    width: calc(100% - 0.4em);
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    
    .toolbar {
        .filter-controls {
            .filter-settings {
                .filter-option {
                    .option-label {
                        width: 150px;
                    }
                }
            }
        }
    }
    
    .customer-table {
        $btn-width: 132px;
        $cell-btn-width: $btn-width + $entity-table-cell-padding-x * 2;

        @include entity-table-base();
        margin: $main-content-spacing 0;

        .table-header,
        .table-row-main {
            grid-template-columns:
                32px             // select
                1fr              // id
                1fr              // name
                1fr              // email
                0.7fr            // reg-date
                0.5fr            // discount
                0.5fr            // total-spent
                $cell-btn-width  // orders
                $cell-btn-width; // ban

            .row-cell.reg-date {
                min-width: 108px;
            }
            .row-cell.discount {
                min-width: 134px;
            }
            .row-cell.total-spent {
                min-width: 70px;
            }
        }

        .table-body {
            .table-row {
                .table-row-main {
                    .row-cell {
                        &.discount {
                            .cell-content {
                                .edit-customer-discount-btn {
                                    width: 20px;
                                    height: 20px;
                                    margin-left: 0.3em;
                                    padding: 0;
                                    outline: none;
                                    border: none;
                                    background: none;
                                    color: $color-blue;
                                    font-size: 11pt;
                                    font-weight: bold;
                                    line-height: 1.25;
                                    vertical-align: top;
                                    visibility: hidden;
                                    transition: color $transition-fast-set;

                                    &:hover {
                                        color: $color-main-enhanced;
                                    }
                                    &:active {
                                        color: $color-main-dark-enhanced;
                                    }
                                    &.visible {
                                        visibility: visible;
                                    }
                                }
                                .discount-form {
                                    .form-field {
                                        @include form-entry-field-base();
                                        display: flex;
                                        align-items: center;
                    
                                        input:not([type="file"]) {
                                            width: 54px;
                                            height: auto;
                                            padding: 3px 4px;
                                            border: 1px solid $color-main-dark;
                                            font-size: 12pt;
                                        }
                                        .submit-form-btn,
                                        .cancel-editing-btn {
                                            width: 26px;
                                            height: 26px;
                                            margin-left: 0.2em;
                                            padding: 0;
                                            outline: none;
                                            border: none;
                                            background: none;
                                            font-size: 14pt;
                                            font-weight: bold;
                                            line-height: 1.25;
                                            transition: color $transition-fast-set;

                                            &:hover {
                                                color: $color-main-enhanced;
                                            }
                                            &:active {
                                                color: $color-main-dark-enhanced;
                                            }
                                            &:focus {
                                                outline: 1px solid rgba($color-main-enhanced, 0.5);
                                                box-shadow: 0 0 4px $color-main-enhanced;
                                            }
                                            &:disabled {
                                                color: $color-main-dark-inactive
                                            }
                                        }
                                        .submit-form-btn {
                                            color: $color-green;

                                        }
                                        .cancel-editing-btn {
                                            color: $color-red;
                                        }
                                    }
                                    .invalid-message {
                                        position: relative;
                                        left: 0;
                                        top: 0.1em;
                                        color: $color-red;
                                        font-size: 9pt;
                                        line-height: 1;
                                    }
                                }
                            }
                        }
                        &.orders,
                        &.ban {
                            .cell-content {
                                button {
                                    @include admin-button();
                                    width: $btn-width;
                    
                                    &.customer-ban-status-btn:not([disabled]) > .icon.banned {
                                        color: $color-red;
                                    }
                                }
                            }
                        }
                    }
                }

                .table-row-expansion-collapsible {
                    .table-row-expansion {
                        .customer-table-orders {
                            padding-left: $main-content-spacing;

                            .customer-table-orders-header {
                                @include main-content-header(
                                    $header-content-min-height-small,
                                    $color-brown-light
                                );
                            }

                            .customer-table-orders-main {
                                padding: $main-content-spacing 0;

                                .order-list {
                                    list-style: none;

                                    .order-item {
                                        &:not(:last-child) {
                                            margin-bottom: $main-content-spacing;
                                        }
                                    }
                                }
                                .orders-load-status {
                                    @include load-status-overlay();
                                }
                                .orders-load-more-indicator {
                                    margin-bottom: 15px;
                                    color: $color-main-dark-active;
                                    font-size: 24pt;
                                    font-weight: bold;
                                    text-align: center;
                                    line-height: 1;
                                }
                                .orders-load-controls {
                                    display: flex;
                                    justify-content: center;
                                    gap: $main-content-spacing;

                                    .orders-load-more-btn,
                                    .orders-load-all-btn {
                                        @include admin-button();
                                        width: 166px;
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}

.notifications-page {
    display: flex;
    flex-direction: column;
    width: 80%;

    .notifications-header {
        @include main-content-header($header-content-min-height-large, $background-color-header);
    }

    .toolbar {
        margin-top: $main-content-spacing;
    }

    .notifications-main {
        margin-top: $main-content-spacing;

        .notifications-load-status {
            @include load-status-overlay();
        }

        .notification-list {
            list-style: none;

            .notification-item {
                &:not(:last-child) {
                    margin-bottom: $main-content-spacing;
                }

                .notification-card {
                    padding: $main-content-spacing;
                    background: $background-color-form;
                    border: 1px solid $border-color-form;
                    transition: box-shadow $transition-fast-set;
        
                    &.unread {
                        box-shadow: 0 3px 12px 2px $color-additional;
                        cursor: pointer;
                    }
        
                    .notification-row {
                        display: flex;
                        justify-content: space-between;
                        font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
                        font-size: 13pt;
                        letter-spacing: -0.02em;
        
                        .notification-date {
                            display: inline-flex;
                            align-items: center;
                            padding: 2px 5px;
                            background: $background-color-header-active;
                            color: $color-main-light;
                        }
        
                        .notification-status {
                            display: inline-flex;
                            align-items: center;
                            padding: 2px 5px;
                            color: $color-main-light;
        
                            &.draft,
                            &.receipt {
                                background: $color-additional;
                            }
                            &.sent,
                            &.read {
                                background: $color-green;
                            }
                        }
                    }
                    .notification-recipients {
                        display: flex;
                        margin-top: 20px;
        
                        label {
                            width: 15%;
                            min-width: 100px;
                            margin-right: 8px;
                            margin-top: 4px;
                            overflow-wrap: anywhere;
                        }
                        textarea {
                            width: 85%;
                            min-height: calc(1em + 4px * 2);
                            margin-top: 4px;
                            padding: 4px;
                            resize: vertical;
                            font-size: 10pt;
                        }
                    }
                    .notification-subject {
                        margin-top: 10px;
                        font-size: 18pt;
                        text-align: center;
                    }
                    .notification-message {
                        width: 100%;
                        margin-top: 8px;
                        font-size: 14pt;
                        text-align: justify;
                    }
                    .notification-signature {
                        margin-top: 20px;
                        font-style: italic;
                        text-align: right;
                    }
                    .notification-meta {
                        margin-top: 20px;
                        font-size: 9pt;
                        text-align: right;
                    }
                    .notification-controls {
                        margin-top: 16px;
                        text-align: right;
        
                        button {
                            @include admin-button();
                            width: 124px;
        
                            &:not(:first-child) {
                                margin-left: $main-content-spacing;
                            }
                            &.delete-notification-btn:not([disabled]) > .icon {
                                color: $color-red;
                            }
                        }
                    }
                }
            }
        }
    }

    .new-items-alert.notifications {
        color: $color-main-light; // Заглушка
    }
}

.event-management-page {
    width: 80%;

    .event-management-header {
        @include main-content-header($header-content-min-height-large, $background-color-header);
    }

    .event-editors {
        width: 100%;
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        gap: $main-content-spacing;
        margin-top: $main-content-spacing;

        .news-editor,
        .promo-editor {
            width: 100%;
            border: 1px solid $border-color-form;
        }

        .news-editor-header,
        .promo-editor-header {
            @include main-content-header($header-content-min-height-small, $color-blue);
        }

        .news-form,
        .promo-form {
            margin-top: $main-content-spacing;
            padding: 12px;
            background: $background-color-form;

            .form-body {
                margin-bottom: 46px;
                font-size: 13pt;

                .form-entry {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    gap: 8px;
                    padding-bottom: 26px;
    
                    &.textarea-elem {
                        align-items: flex-start;
    
                        .form-entry-label {
                            margin-top: 0.4em;
                        }
                        textarea {
                            resize: vertical;
                        }
                    }
                    &.input-date-elem {
                        .form-entry-field {
                            width: 150px;
                        }
                    }
    
                    .form-entry-label {
                        @include form-entry-label-base();
                        width: 28%;
                    }
                    .form-entry-field {
                        @include form-entry-field-base();
                        display: flex;
                        align-items: center;
                        width: 72%;
    
                        .promo-image-remove-box {
                            width: 90px;
                            margin-right: 10px;
                            line-height: 1;
                            font-size: 12pt;
        
                            .designed-checkbox-container {
                                align-items: flex-end;
                                text-align: left;
        
                                .checkbox-label {
                                    white-space: normal;
                                }
                                .designed-checkbox {
                                    transform: translateY(-1px);
                                }
                            }
                        }
                        .invalid-message {
                            left: 0.4em;
                            top: calc(100% + 0.1em);
                            width: calc(100% - 0.4em);
                        }
                    }
                }
            }
        }

        .news-form textarea {
            height: 300px;
        }
        .promo-form textarea {
            height: 220px;
        }
    }
}

.personal-page {
    display: flex;
    flex-direction: column;
    width: 100%;
    margin: 10vh 20vw;
    padding: 20px;
    background-color: color.mix(#fff, $color-additional, 75%);

    .personal-header {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: $header-content-min-height-large;

        h2 {
            color: rgba($color-main-dark, 0.88);
            font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
            font-size: 22pt;
            font-style: italic;
            text-shadow: 3px 2px 10px rgba($color-main-dark, 0.5);
            text-decoration: underline $color-additional;
            text-align: center;
            overflow-wrap: anywhere;
        }
    }

    .personal-menu-wrapper {
        flex: 1; // Растягивает контейнер по высоте на всё свободное пространство
        display: flex;
        justify-content: center;
        align-items: center;

        .personal-menu {
            list-style: none;

            .personal-item {
                max-width: 640px;
                margin: 16px 0;

                a {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    width: 100%;
                    padding: 6px 8px;
                    background: linear-gradient(135deg, $background-color-menu, rgb(74, 51, 120));
                    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
                    color: $color-main-light;
                    font-size: 24pt;
                    text-decoration: none;
                    transition:
                        border-radius $transition-fast-set,
                        color $transition-fast-set;

                    &:hover {
                        color:$color-main-enhanced;
                        border-top-right-radius: 32px;
                        border-bottom-right-radius: 32px;

                        .icon {
                            color: $color-green;
                        }
                    }

                    .icon {
                        margin-left: 60px;
                        line-height: 1;
                        transform: translateY(1px);
                        color: $color-main-light-active;
                        transition: color $transition-fast-set;
                        user-select: none;
                    }
                }
            }
        }
    }
}

.profile-page {
    width: 80%;

    .profile-header {
        @include main-content-header($header-content-min-height-large, $background-color-header);
    }

    .profile-form {
        width: 45%;
        min-width: 454px;
        margin-top: $main-content-spacing;
        padding: 12px;
        border: 1px solid $border-color-form;
        background: $background-color-form;

        .form-body {
            margin-bottom: 54px;
            font-size: 13pt;

            .form-group {
                &:not(:last-child) {
                    margin-bottom: 54px;
                }
    
                .form-group-title {
                    min-height: $form-field-base-height;
                    margin-bottom: 4px;
                    color: $color-main-dark;
                    text-decoration: underline $color-main-dark;
                    text-shadow: 2px -1px 3px rgba($color-main-dark, 0.15);
                    line-height: 1.1;
                }
                .form-entry {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    min-height: $form-field-base-height;
                    padding-bottom: 4px;
    
                    .form-col  {
                        &.col-left {
                            display: flex;
                            align-items: center;
                            width: 35%;
                            line-height: 1.1;
                            letter-spacing: -0.02em;
                        }
                        &.col-right {
                            width: 65%;
                            margin-left: 8px;
    
                            &.current-value {
                                display: flex;
                                align-items: center;
                                min-height: $form-field-base-height;
                                padding: 3px 8px;
                                border-radius: 4px;
                                background-color: $background-color-form-inactive;
                                color: $color-main-dark;
                                font-weight: bold;
                                word-break: break-all;
                                line-height: 1.1;
                            }
    
                            .form-entry-field {
                                @include form-entry-field-base();
                                width: 100%;
    
                                .invalid-message {
                                    left: calc(100% + 18px);
                                    top: 1px;
                                    width: 264px;
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}

.error-logs-page {
    display: flex;
    flex-direction: column;
    width: 80%;

    .error-logs-header {
        @include main-content-header($header-content-min-height-large, $background-color-header);
    }

    .error-logs-main {
        flex: 1; // Растягивает контейнер по высоте на всё свободное пространство
        margin-top: $main-content-spacing;
        padding: $main-content-spacing;
        border: 2px solid $color-warn-dark;
        border-radius: 8px;
        background-color: rgba($color-main-light, 0.7);

        .error-logs-load-status {
            @include load-status-overlay();
        }

        .error-logs-output {
            color: $color-main-dark;
            font-family: 'Courier New', Courier, monospace;
            font-size: 12pt;
            white-space: pre-wrap; // Сохранение форматирования из файла и разрешение на перенос слов
            overflow-wrap: break-word; // Перенос длинных слов
        }
    }
}

.checkout-preferences-page {
    display: flex;
    flex-direction: column;
    width: 80%;

    .checkout-preferences-header {
        @include main-content-header($header-content-min-height-large, $background-color-header);
    }

    .checkout-preferences-form {
        width: 45%;
        min-width: 454px;
        margin-top: $main-content-spacing;
        padding: 12px;
        border: 1px solid $border-color-form;
        background-color: $background-color-form;

        .form-body {
            margin-bottom: 54px;
            font-size: 13pt;

            .form-group {
                &:not(:last-child) {
                    margin-bottom: 54px;
                }

                .form-group-title {
                    min-height: $form-field-base-height;
                    margin-bottom: 4px;
                    color: $color-main-dark;
                    text-decoration: underline $color-main-dark;
                    text-shadow: 2px -1px 3px rgba($color-main-dark, 0.15);
                }
                .form-group-entries {
                    .form-entry {
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                        gap: 8px;
                        width: 100%;
                        padding-bottom: 4px;
                        
                        .form-entry-label {
                            @include form-entry-label-base();
                            width: 35%;

                            .info {
                                position: relative;
                                top: -8px;
                                color: $color-blue;
                                font-size: 13pt;
                                cursor: default;
                            }
                        }
                        
                        .form-entry-field {
                            @include form-entry-field-base();
                            display: flex;
                            justify-content: flex-end;
                            width: 65%;
    
                            .auto-fill-email-btn {
                                @include control-button();
                                min-width: 42px;
                                margin-right: 10px;
                                color: $color-blue;
                                font-size: 18pt;
                                line-height: 1;
                            }
                            .invalid-message {
                                left: calc(100% + 18px);
                                top: 1px;
                                width: 264px;
                                text-align: justify;
                            }
                        }
                    }
                }
            }
        }
    }
}

.cart-page {
    display: flex;
    flex-direction: column;
    width: 100%;

    .cart-header {
        @include main-content-header($header-content-min-height-large, $background-color-header);
    }

    .cart-summary-wrapper {
        position: sticky;
        top: $header-main-panel-height;
        margin-top: $main-content-spacing;
        z-index: 1; // Решает проблемы со Stacking Context для некоторых элементов на странице

        &.dashboard-panel-active {
            top: $header-main-panel-height + $header-dashboard-panel-height;
        }

        .cart-summary {
            display: flex;
            justify-content: flex-end;
            gap: $main-content-spacing;
            padding: 12px $main-content-spacing;
            background-color: color.mix(#fff, $color-blue, 80%);
    
            .cart-totals {
                display: flex;
                align-items: center;
                gap: $main-content-spacing;
    
                .cart-totals-title-box {
                    overflow-wrap: anywhere;

                    .cart-totals-title {
                        color: $color-main-dark;
                        font-size: 18pt;
                    }
                    .cart-totals-info {
                        color: $color-main-inactive;
                        font-size: 10pt;
                        line-height: 1.1;
                    }
                }
                .cart-total-amounts {
                    display: flex;
                    flex-direction: column;
                    align-items: flex-end;
                    white-space: nowrap;
    
                    .cart-original-total {
                        color: $color-main-inactive;
                        font-size: 14pt;
                        text-decoration: line-through $color-red;
                    }
                    .cart-current-total {
                        color: $color-blue;
                        font-size: 20pt;
                        font-weight: bold;
                    }
                    .cart-saved-total {
                        margin-top: 2px;
                        padding: 2px 4px;
                        background-color: rgba($color-yellow, 0.7);
                        color: $color-blue-light;
                        font-size: 11pt;
                        font-style: italic;
                    }
                }
            }
    
            .cart-controls {
                display: flex;
                flex-direction: column;
                gap: 6px;
    
                .update-cart-btn,
                .place-order-btn {
                    @include form-button();
                    width: 172px;
                }
            }
        }
    }

    .cart-main {
        flex: 1; // Растягивает контейнер по высоте на всё свободное пространство
        display: flex;
        flex-direction: column;
        margin-top: $main-content-spacing;
        border: 1px solid $border-color-form;

        .cart-main-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: $main-content-spacing;
            padding: 12px $main-content-spacing;
            border-bottom: 1px solid $border-color-form;
            background-color: $background-color-form;

            .toolbar {
                width: 400px;

                .search-controls {
                    width: 100%;
                }
            }

            .cart-main-controls {
                display: flex;
                align-items: center;
                gap: $main-content-spacing;

                .cart-main-info {
                    color: $color-main-dark;
                    font-size: 12pt;
                    text-align: right;
                    overflow-wrap: anywhere;

                    .total-cart-items {
                        color: $color-green;
                        font-weight: bold;
                    }
                    .filtered-cart-items-count {
                        color: $color-additional;
                        font-weight: bold;
                    }
                    .fix-cart-items-btn {
                        @include control-button();
                        margin-left: 0.4em;
                    }
                    .text-link-btn {
                        color: $color-blue;
                        text-decoration-color: transparent;
                        transition:
                            color $transition-fast-set,
                            text-decoration-color $transition-fast-set;

                        &.active {
                            color: $color-main-dark;
                            text-decoration: none;
                            cursor: text;
                        }
                        &:hover:not(.active) {
                            color: $color-main-enhanced;
                            text-decoration-color: $color-main-enhanced;
                        }
                        &[disabled] {
                            color: $color-main-dark-inactive;
                            pointer-events: none;
                        }

                        .warning-cart-items-count {
                            color: $color-red;
                            font-weight: bold;
                        }
                    }
                }
                .clear-cart-btn {
                    @include form-button();
                    flex-shrink: 0;
                    width: 172px;
                }
            }
        }

        .cart-load-status {
            @include load-status-overlay();
        }

        .cart-item-list {
            flex: 1; // Растягивает контейнер по высоте на всё свободное пространство
            padding: 12px $main-content-spacing;
            padding-top: 0; // Для первого элемента с отступом (обязательно для анимации)
            list-style: none;

            .cart-item {
                .cart-item-card-collapsible {
                    .cart-item-card {
                        display: grid;
                        grid-template-areas: "thumb info prices multiply quantity equal totals remove";
                        grid-template-columns:
                            auto  // product-thumb
                            1fr   // product-info
                            auto  // product-prices
                            auto  // math-symbol (×)
                            auto  // product-quantity-selector или out-of-stock
                            auto  // math-symbol (=)
                            auto  // product-total-amounts
                            auto; // remove-product-box
                        align-items: center;
                        column-gap: $main-content-spacing;
                        position: relative;
                        margin-top: 12px;
                        padding: 12px;
                        border: 1px solid $border-color-form;
                        border-radius: 4px;
                        background-color: rgba($color-main-light, 0.7);
        
                        &.unavailable::after {
                            content: attr(data-message);
                            display: flex;
                            justify-content: center;
                            align-items: center;
                            position: absolute;
                            left: 0;
                            right: 0;
                            top: 0;
                            bottom: 0;
                            padding: 0 1em;
                            background-color: rgba($background-color-disabled, 0.6);
                            color: $color-warn-dark;
                            font-size: 12pt;
                            backdrop-filter: blur(1px);
                            -webkit-backdrop-filter: blur(1px);
                        }
                        &.quantity-reduced {
                            box-shadow: inset 0 -3px 12px 2px $color-additional;
                        }
                        &.out-of-stock {
                            box-shadow: inset 0 -3px 12px 2px $color-red;
                        }
                        &.inactive {
                            box-shadow: inset 0 -3px 12px 2px $color-main-dark-inactive;
                        }
        
                        .product-thumb {
                            grid-area: thumb;
                            align-self: flex-start;
                            width: $product-thumb-small-size;
                            height: $product-thumb-small-size;
                            outline: 1px solid $color-main-light-active;
                            background-color: $color-main-light;
                            user-select: none;
                            transition: outline-color $transition-fast-set;

                            &:hover {
                                outline-color: $color-main-enhanced;
                            }
        
                            .product-thumb-img {
                                width: 100%;
                                height: 100%;
                                object-fit: contain;
                                vertical-align: middle;
                            }
                        }
                        .product-info {
                            grid-area: info;
                            align-self: flex-start;
        
                            .product-title {
                                font-size: 12pt;
                                font-weight: normal;
                                margin-bottom: 8px;
        
                                a {
                                    color: $color-blue;
                                    text-decoration-color: transparent;
                                    transition:
                                        color $transition-fast-set,
                                        text-decoration-color $transition-fast-set;
            
                                    &:hover {
                                        color: $color-main-enhanced;
                                        text-decoration-color: $color-main-enhanced;
                                    }
                                }
                            }
                            .product-info-item {
                                font-size: 11pt;
        
                                .label {
                                    color: $color-main-dark-active;
                                }
                                .value {
                                    color: $color-main-dark;
                                    margin-left: 0.3em;
                                }
                            }
                        }
                        .math-symbol {
                            color: $color-main-dark-active;
                            font-size: 28pt;
                            line-height: 1;
        
                            &.multiply {
                                grid-area: multiply;
                            }
                            &.equal {
                                grid-area: equal;
                            }
                        }
                        .product-prices {
                            grid-area: prices;
                            max-width: 100%;
                            text-align: right;
                            white-space: nowrap;
        
                            .measured-content {
                                display: inline-block;
        
                                .original-price {
                                    color: $color-main-inactive;
                                    font-size: 11pt;
                                    text-decoration: line-through $color-red;
                                }
                                .current-price {
                                    color: $color-main-dark;
                                    font-size: 14pt;
                                }
                                .unit-info {
                                    color: $color-main-inactive;
                                    font-size: 9pt;
                                    line-height: 1.7;
                                }
                            }
                        }
                        .product-quantity-selector {
                            grid-area: quantity;
        
                            .reduction-message {
                                position: absolute;
                                left: 50%;
                                top: calc(-1em - 4px);
                                transform: translateX(-50%);
                                white-space: nowrap;
                            }
                            .add-to-cart-box {
                                .badge-box.single-badge {
                                    left: 50%;
                                    top: 100%;
                                    transform: translate(-50%, -28%);
                                }
                            }
                        }
                        .out-of-stock,
                        .inactive {
                            grid-area: quantity;
                            width: 122px; // Ширина product-quantity-selector
                            padding: 4px 6px;
                            background-color: rgba($color-main-dark, 0.1);
                            font-size: 10pt;
                            text-align: center;
                            overflow-wrap: anywhere;

                            &.out-of-stock {
                                .stock-info {
                                    color: $color-red;
                                }
                            }
                            &.inactive {
                                .stock-info {
                                    color: color.mix($color-additional, $color-red, 75%);
                                }
                            }
        
                            .stock-info {
                                .icon {
                                    margin-right: 0.3em;
                                }
                            }
                            .quantity-info {
                                color: $color-main-dark-active;

                                .quantity-unit {
                                    white-space: nowrap;

                                    .quantity {
                                        color: $color-red;
                                        font-weight: bold;
                                    }
                                }
                            }
                        }
                        .product-total-amounts {
                            grid-area: totals;
                            max-width: 100%;
                            text-align: right;
        
                            .measured-content {
                                display: inline-block;
        
                                .product-original-total {
                                    color: $color-main-inactive;
                                    font-size: 11pt;
                                    text-decoration: line-through $color-red;
                                }
                                .product-current-total {
                                    color: $color-main-dark;
                                    font-size: 14pt;
                                }
                                .product-saved-total {
                                    margin-top: 2px;
                                    padding: 2px 4px;
                                    background-color: rgba($color-yellow, 0.7);
                                    color: $color-blue-light;
                                    font-size: 9pt;
                                    font-style: italic;
                                    line-height: 1.2;
                                }
                            }
                        }
                        .remove-product-box {
                            grid-area: remove;
                            align-self: flex-start;
        
                            .remove-product-btn {
                                background: none;
                                border: none;
                                color: $color-main-enabled;
                                font-size: 16pt;
                                text-shadow: 0 0 8px $color-main-dark-active;
                                line-height: 1;
                                cursor: pointer;
                                user-select: none;
                                transition:
                                    color $transition-fast-set,
                                    text-shadow $transition-fast-set;
                    
                                &:hover {
                                    color: $color-red;
                                    text-shadow: 0 0 8px $color-main-enhanced;
                                }
                                &:active {
                                    color: $color-red;
                                    text-shadow: 0 0 12px $color-red;
                                }
                                &[disabled] {
                                    color: rgba($color-main-dark, 0.1);
                                    text-shadow: 0 0 8px $color-main-dark-inactive;
                                    cursor: default;
                                    pointer-events: none;
                                }
                            }
                        }
                    }
        
                    .cart-item-pending-removal,
                    .cart-item-deleted {
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                        gap: $main-content-spacing;
                        margin-top: 12px;
                        padding: 12px;
                        border: 1px solid $color-warn-light;
                        border-radius: 4px;
                        background-color: $background-color-warn;
                        color: $color-warn-dark;
        
                        .cart-item-info {
                            flex-shrink: 3;
                            font-family: 'Roboto', sans-serif;
                            font-size: 11pt;

                            .cart-item-warning {
                                display: inline-block;
                                margin-top: 6px;
                            }
                        }
                        .cart-item-controls-box {
                            text-align: right;

                            .cart-item-status-text {
                                font-size: 12pt;
                                visibility: hidden;

                                &.visible {
                                    visibility: visible;
                                }
                                &.error {
                                    color: $color-red;
                                }
                            }
        
                            .cart-item-buttons-box {
                                display: flex;
                                justify-content: flex-end;
                                gap: 8px;
                                margin-top: 4px;
        
                                .restore-cart-item-btn,
                                .remove-cart-item-btn {
                                    @include control-button();
                                    width: 148px;
                                    padding: 5px;
                                    font-size: 12pt;
                                }
                                .restore-cart-item-btn {
                                    border-color: $color-blue;
                                    color: $color-blue;
                
                                    &:hover {
                                        border-color: $color-blue-light;
                                        color:$color-blue-light;
                                    }
                                    &:active {
                                        border-color: $color-blue;
                                        background-color: $color-main-enabled;
                                        color: $color-blue;
                                    }
                                }
                                .remove-cart-item-btn {
                                    border-color: $color-warn-dark;
                                    color: $color-warn-dark;
                
                                    &:hover {
                                        border-color: $color-warn-light;
                                        color: $color-warn-light;
                                    }
                                    &:active {
                                        border-color: $color-warn-dark;
                                        background-color: color.mix(
                                            $color-main-light,
                                            $background-color-warn,
                                            60%
                                        );
                                        color: $color-warn-dark;
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}

.checkout-page {
    display: flex;
    flex-direction: column;
    width: 80%;

    .checkout-header {
        @include main-content-header($header-content-min-height-large, $background-color-header);
    }

    .checkout-main {
        display: flex;
        align-items: flex-start;
        gap: $main-content-spacing;
        margin-top: $main-content-spacing;

        .checkout-form {
            width: 100%;
            padding: 12px;
            border: 1px solid $border-color-form;
            background-color: $background-color-form;
    
            .form-body {
                margin-bottom: 54px;
                font-size: 13pt;
    
                .form-group {
                    @mixin form-block-wrapper($padding: 6px, $border-color: $border-color-form) {
                        padding: $padding;
                        border: 1px solid $border-color;
                    }
                    @mixin checkout-form-group-entries($customer-comment: false) {
                        @include form-block-wrapper($padding: 12px 6px);

                        .form-entry {
                            display: flex;
                            justify-content: space-between;
                            gap: 8px;
                            width: 100%;

                            @if $customer-comment {
                                align-items: flex-start;
                                padding-bottom: null;
                            } @else {
                                align-items: center;
                                padding-bottom: 26px;
                            }

                            &.email-field {
                                .form-entry-field {
                                    .invalid-message {
                                        $shift: calc(
                                            0.4em +
                                            $form-field-btn-width +
                                            $form-field-btn-margin-right
                                        );

                                        left: $shift;
                                        width: calc(100% - $shift);
                                    }
                                }
                            }
                            
                            .form-entry-label {
                                @include form-entry-label-base();
                                width: 22%;
                                min-width: 136px;

                                @if $customer-comment {
                                    margin-top: 0.4em;
                                } @else {
                                    margin-top: null;
                                }

                                .info {
                                    position: relative;
                                    top: -8px;
                                    color: $color-blue;
                                    font-size: 13pt;
                                    cursor: default;
                                }
                            }
                            
                            .form-entry-field {
                                @include form-entry-field-base();
                                display: flex;
                                justify-content: flex-end;
                                width: 78%;
                            
                                @if $customer-comment {
                                    textarea {
                                        height: 80px;
                                        resize: vertical;
                                    }
                                } @else {
                                    .auto-fill-email-btn {
                                        @include control-button();
                                        flex-shrink: 0;
                                        width: $form-field-btn-width;
                                        margin-right: $form-field-btn-margin-right;
                                        color: $color-blue;
                                        font-size: 18pt;
                                        line-height: 1;
                                    }
                                    .invalid-message {
                                        left: 0.4em;
                                        top: calc(100% + 0.1em);
                                        width: calc(100% - 0.4em);
                                    }
                                }
                            }
                        }
                    }

                    &:not(:last-child) {
                        margin-bottom: $main-content-spacing;
                    }
                    &.order-items-group {
                        .order-items-collapsible {
                            .order-items {
                                @include form-block-wrapper($padding: 6px 6px 12px);

                                .order-items-headers,
                                .order-item {
                                    display: grid;
                                    grid-template-areas: "thumb title sku quantity totals";
                                    grid-template-columns:
                                        $product-thumb-smallest-size  // product-thumb
                                        1fr                           // product-title
                                        auto                          // product-sku
                                        auto                          // product-quantity
                                        auto;                         // product-totals
                                    align-items: center;
                                    column-gap: $main-content-spacing;
                                    padding: 6px;
                                    border: 1px solid $border-color-form;
                                    margin-bottom: 6px;
                                    line-height: 1.15;
                                    overflow-wrap: anywhere;

                                    .product-thumb {
                                        grid-area: thumb;
                                    }
                                    .product-title {
                                        grid-area: title;
                                    }
                                    .product-sku {
                                        grid-area: sku;
                                        width: 104px;
                                        white-space: nowrap;
                                    }
                                    .product-quantity {
                                        grid-area: quantity;
                                        width: 72px;
                                        white-space: nowrap;
                                    }
                                    .product-total-amounts {
                                        grid-area: totals;
                                        width: 98px;
                                        white-space: nowrap;
                                    }
                                }

                                .order-items-headers {
                                    background-color: rgba($background-color-menu-active, 10%);
                                    color: $color-main-dark-active;
                                    font-size: 10pt;
                                    font-weight: bold;
                                    text-align: center;
                                }
                                .order-item {
                                    border-radius: 4px;
                                    background-color: rgba($color-blue, 10%);
                                    font-size: 11pt;

                                    &.has-discount {
                                        .product-info-item {
                                            gap: 14px;
                                        }
                                    }

                                    .product-info-item {
                                        display: flex;
                                        flex-direction: column;
                                        align-items: center;
                                        gap: 3px;

                                        .label {
                                            display: none;
                                            color: $color-main-dark-active;
                                            font-size: 10pt;

                                            .colon {
                                                display: none;
                                            }
                                        }
                                        .value {
                                            color: $color-main-dark;
                                        }
                                    }

                                    .product-thumb {
                                        width: $product-thumb-smallest-size;
                                        height: $product-thumb-smallest-size;
                                        outline: 1px solid $color-main-light-active;
                                        background-color: $color-main-light;
                                        user-select: none;
                                        transition: outline-color $transition-fast-set;

                                        &:hover {
                                            outline-color: $color-main-enhanced;
                                        }
                    
                                        a {
                                            .product-thumb-img {
                                                width: 100%;
                                                height: 100%;
                                                object-fit: contain;
                                                vertical-align: middle;
                                            }
                                        }
                                    }
                                    .product-title {
                                        a {
                                            color: $color-blue;
                                            text-decoration-color: transparent;
                                            transition:
                                                color $transition-fast-set,
                                                text-decoration-color $transition-fast-set;
                    
                                            &:hover {
                                                color: $color-main-enhanced;
                                                text-decoration-color: $color-main-enhanced;
                                            }
                                        }
                                    }
                                    .product-total-amounts {
                                        align-items: flex-end;

                                        .value {
                                            width: fit-content;
                                            position: relative;

                                            .product-original-total {
                                                position: absolute;
                                                right: 0;
                                                top: -1em;
                                                color: $color-main-inactive;
                                                font-size: 9pt;
                                                text-decoration: line-through $color-red;
                                                line-height: 1;
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                    &.customer-comment-group {
                        .form-group-entries {
                            @include checkout-form-group-entries($customer-comment: true);
                        }
                    }
    
                    .form-group-title {
                        @include form-block-wrapper($border-color: $background-color-form-inactive);
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                        gap: $main-content-spacing;
                        min-height: $form-field-base-height;
                        background-color: $background-color-form-inactive;
                        color: $color-main-dark-active;

                        &.visited {
                            color: $color-blue;
                            cursor: pointer;
    
                            &:hover {
                                .form-group-action {
                                    color: $color-blue;
                                    text-decoration: underline solid;
                                }
                            }
                            &.valid {
                                color: $color-green;
                            }
                            &.invalid {
                                color: $color-red;
                            }
                        }
    
                        .form-group-number {
                            display: inline-flex;
                            justify-content: center;
                            align-items: center;
                            width: 22px;
                            height: 22px;
                            margin-right: 0.3em;
                            border: 1px solid;
                            border-radius: 50%;
                            user-select: none;
                        }
                        .form-group-action {
                            color: $color-main-dark;
                            font-size: 10pt;
                            text-decoration: underline dotted;
                            transition:
                                color $transition-fast-set,
                                text-decoration $transition-fast-set;
                        }
                    }
                    .form-group-summary-collapsible {
                        .form-group-summary {
                            @include form-block-wrapper();
                            background-color: $color-main-enabled;
                            font-size: 11pt;
    
                            .form-entry-summary {
                                &.error {
                                    color: $color-red;
                                }
                                .form-entry-summary-label {
                                    font-weight: bold;
                                }
                            }
                        }
                    }
                    .form-group-entries-collapsible {
                        .form-group-entries {
                            @include checkout-form-group-entries();
                        }
                    }
                    .form-group-controls {
                        display: flex;
                        justify-content: space-between;
                        padding-top: 12px;
                        align-items: center;
                        border-top: 1px solid $border-color-form;

                        .prev-form-group-btn,
                        .next-form-group-btn {
                            @include control-button();
                            width: 82px;
                            background-color: $color-main-enabled;
                            font-size: 11pt;

                            .icon {
                                color: $color-blue;
                            }
                        }
                    }
                }
            }
        }

        .checkout-sidebar {
            $checkout-sidebar-sticky-margin: 4px;

            flex-shrink: 0;
            position: sticky;
            top: $header-main-panel-height + 4px;
            width: 360px;
            z-index: 1;

            &.dashboard-panel-active {
                top: $header-main-panel-height + $header-dashboard-panel-height +
                    $checkout-sidebar-sticky-margin;
            }
            
            .checkout-summary {
                padding: 12px;
                border: 1px solid $border-color-form;
                background-color: $color-main-enabled;
                font-size: 12pt;
    
                .checkout-row {
                    display: flex;
                    justify-content: space-between;
                    align-items: flex-end;
                    gap: $main-content-spacing;
    
                    &:not(.final-row) {
                        margin-bottom: 12px;
                    }
                    &.final-row {
                        align-items: center;
                        padding-top: 12px;
                        border-top: 1px solid $border-color-form;
                        color: $color-main-dark;
                        font-weight: bold;
                    }
    
                    .checkout-label {
                        letter-spacing: -0.02em;
    
                        &.order-final-total-label {
                            font-size: 16pt;
                        }
                    }
                    .checkout-value {
                        text-align: right;
    
                        &.order-subtotal {
                            color: $color-main-inactive;
                            font-size: 10pt;
                            text-decoration: line-through $color-red;
                            line-height: 1;
                        }
                        &.order-total-savings {
                            color: $color-blue;
                        }
                        &.order-final-total {
                            padding: 3px;
                            background-color: rgba($color-yellow, 0.7);
                            font-size: 18pt;
                        }
                    }
                }
            }
            .checkout-order-draft-panel {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-top: $main-content-spacing;
                padding: 12px;
                border: 1px solid $border-color-form;
                background-color: $color-main-enabled;

                .order-draft-expiration-timer {
                    line-height: 1.1;

                    .timer-info {
                        font-size: 10pt;
                        letter-spacing: -0.02em;
                    }
                    .time-left-display {
                        display: inline-block;
                        margin-top: 3px;
                        color: $color-brown-light;
                        font-size: 13pt;
                    }
                }
                .cancel-order-btn {
                    @include form-button();
                }
            }
        }
    }
}

.orders-page {
    display: flex;
    flex-direction: column;
    width: 80%;

    .orders-header {
        @include main-content-header($header-content-min-height-large, $background-color-header);
    }

    .toolbar {
        margin-top: $main-content-spacing;

        .filter-controls {
            .filter-settings {
                .filter-option {
                    .option-label {
                        width: 138px;
                    }
                }
            }
        }
    }

    .orders-main {
        margin-top: $main-content-spacing;

        .orders-load-status {
            @include load-status-overlay();
        }

        .order-list {
            list-style: none;

            .order-item {
                &:not(:last-child) {
                    margin-bottom: $main-content-spacing * 2;
                }
            }
        }
    }

    .new-items-alert.active-orders {
        color: $color-main-light; // Заглушка
    }
}

.order-details-page {
    display: flex;
    flex-direction: column;
    width: 80%;

    .order-details-header {
        @include main-content-header($header-content-min-height-large, $background-color-header);
    }
        
    .order-details-load-status {
        @include load-status-overlay();
        margin-top: $main-content-spacing;
    }

    .order-details-main {
        display: flex;
        margin-top: $main-content-spacing;

        .order-details-sections {
            position: relative;
            width: 100%;
            border: 2px solid $border-color-form;
            box-shadow: 0 3px 12px 2px rgba($color-main-inactive, 0.35);

            &.completed {
                border-color: $color-green;
                box-shadow: 0 3px 12px 2px rgba($color-green, 0.35);
            }
            &.cancelled {
                border-color: $color-red;
                box-shadow: 0 3px 12px 2px rgba($color-red, 0.35);
            }
    
            .active-order-badge {
                position: absolute;
                left: -0.27em;
                top: -0.54em;
                color: $color-orange;
                font-size: 26pt;
                font-weight: bold;
                text-shadow: 0 0 5px rgba($color-warn-dark, 0.3);
                line-height: 1;
                user-select: none;
            }
            .order-details-section {
                &:not(:first-of-type) {
                    .order-details-section-header {
                        border-top: 1px solid $border-color-form;
                    }
                }
                &[data-section="management"] {
                    .order-management-controls {
                        margin: 4px 0;

                        .order-status-panel {
                            .order-status-panel-title {
                                border-top: 1px solid $border-color-form;
                            }
                        }
                    }
                }
                &[data-section="payment"] {
                    .card-online-payment-link {
                        @include designed-link();
                    }
                }
                &[data-section="items"] {
                    .order-details-items-table {
                        $product-thumb-size: $product-thumb-small-size;
                        $cell-thumb-width: $product-thumb-size + $entity-table-cell-padding-x * 2;
    
                        @include entity-table-base();
                        margin-top: 4px;

                        &.edit-mode {
                            margin-top: $order-content-spacing;

                            .table-header,
                            .table-row-main {
                                .row-cell {
                                    &.quantity {
                                        min-width: 120px;
                                    }
                                }
                            }
                        }
    
                        .table-header {
                            color: $color-main-dark-active;
                        }
                        .table-header,
                        .table-row-main {
                            border-left: none;
                            border-right: none;
                            grid-template-columns:
                                $cell-thumb-width  // thumb
                                1fr                // sku
                                3.5fr              // title
                                1.2fr              // price
                                1fr                // discount
                                0.8fr              // quantity
                                1.2fr;             // total-price
    
                            .row-cell {
                                &.thumb {
                                    .product-thumb {
                                        width: $product-thumb-size;
                                        height: $product-thumb-size;
                                        background-color: $color-main-light;
                                        user-select: none;
        
                                        .product-thumb-img {
                                            width: 100%;
                                            height: 100%;
                                            object-fit: contain;
                                            vertical-align: middle;
                                        }
                                    }
                                }
                                &.sku {
                                    min-width: 120px;
                                }
                                &.price,
                                &.total-price {
                                    min-width: 120px;

                                    p {
                                        line-height: 1.1;

                                        &:not(:last-child) {
                                            margin-bottom: 6px;
                                        }
                                    }
                                }
                                &.discount {
                                    min-width: 74px;
                                    line-height: 1.1;
                                }
                                &.quantity {
                                    min-width: 100px;

                                    .cell-content {
                                        .form-field {
                                            @include form-entry-field-base();
                                            display: inline-block;
                                            text-align: left;
                        
                                            input:not([type="file"]) {
                                                width: 72px;
                                                height: auto;
                                                padding: 3px 4px;
                                                border: 1px solid $color-main-dark;
                                                font-size: 12pt;
                                            }
                                            .invalid-message {
                                                position: relative;
                                                left: 0;
                                                top: 0.1em;
                                                text-indent: 0;
                                            }
                                        }
                                    }
                                }
                                
                                .cell-content {
                                    max-height: $product-thumb-size;
                                    overflow: auto;

                                    .meta-label {
                                        position: relative;
                                        top: -2px;
                                        color: $color-brown;
                                        font-size: 9pt;
                                    }
                                }
                            }
                        }
                    }

                    .order-details-items-summary {
                        display: flex;
                        flex-direction: column;
                        align-items: flex-end;
                        padding: $order-content-spacing;
                        background-color: rgba($color-main-light, 0.5);
                        font: 11pt Arial, sans-serif;
    
                        p {
                            display: flex;
    
                            &:not(:last-child) {
                                margin-bottom: 2px;
                            }
                            &.total-amount-summary {
                                font-weight: bold;
                            }
    
                            .label-col {
                                width: 240px;
                                color: $color-main-dark-enhanced;
                            }
                            .value-col {
                                width: 180px;
                                color: $color-main-dark;
                            }
                        }
                    }
                }

                .order-details-section-header {
                    @include main-content-header($header-content-min-height-small, $color-brown-light);
                    flex-direction: row;
                    border-bottom: 1px solid $border-color-form;

                    h3 {
                        width: 100%;
                    }
                    .edit-order-details-section-btn {
                        @include admin-button();
                        width: 128px;
                    }
                }

                .order-details-section-form-collapsible {
                    display: flex;
                    justify-content: center;
                    padding: 0 $order-content-spacing;
                    background-color: rgba($color-main-light, 0.5);

                    .order-details-section-form {
                        width: 50%;
                        margin-top: $order-content-spacing;
                        padding: 12px;
                        border: 1px solid $border-color-form;
                        background: $background-color-form;
                        text-align: left;
                        
                        .form-body {
                            margin-bottom: 16px;
                            font-size: 13pt;
        
                            .form-entry {
                                display: flex;
                                justify-content: space-between;
                                align-items: center;
                                gap: 8px;
                                padding-bottom: 26px;

                                &.textarea-elem {
                                    align-items: flex-start;
                
                                    .form-entry-label {
                                        margin-top: 0.4em;
                                    }
                                    textarea {
                                        height: 120px;
                                        resize: vertical;
                                    }
                                }
                
                                .form-entry-label {
                                    @include form-entry-label-base();
                                    width: 30%;

                                    .info {
                                        position: relative;
                                        top: -8px;
                                        color: $color-blue;
                                        font-size: 13pt;
                                        cursor: default;
                                    }
                                }
                                .form-entry-field {
                                    @include form-entry-field-base();
                                    width: 70%;
                
                                    .invalid-message {
                                        left: 0.4em;
                                        top: calc(100% + 0.1em);
                                        width: calc(100% - 0.4em);
                                    }
                                }
                            }
                        }
                    }
                }
    
                .order-details-section-main {
                    padding: $order-content-spacing;
                    background-color: rgba($color-main-light, 0.5);

                    p, div {
                        font-size: 13pt;
                        overflow-wrap: anywhere;

                        &:not(:last-child) {
                            margin-bottom: $order-content-spacing;
                        }

                        .label {
                            color: $color-main-dark-active;
                            font-weight: bold;
                        }
                        .value {
                            color: $color-main-dark;
                        }
                        ul.value {
                            margin-left: 2em;
                        }
                        .update-order-btn,
                        .repeat-order-btn {
                            @include admin-button();
                            width: 142px;
                        }
                        .download-invoice-btn {
                            font-size: 13pt;
                        }
                    }
                }
            }
            
        }
        .order-management-notes {
            position: fixed;
            right: 30px;
            z-index: 101;
            transition: bottom $transition-fast-set;

            .note-badge {
                font-size: 24pt;
            }
            .note {
                .note-popup {
                    right: -50%;
                }
            }
        }
    }
}

.card-online-payment-page {
    display: flex;
    flex-direction: column;
    width: 80%;

    .card-online-payment-header {
        @include main-content-header($header-content-min-height-large, $background-color-header);
    }

    .card-online-payment-form {
        width: 40%;
        min-width: 300px;
        max-width: 420px;
        margin-top: $main-content-spacing;
        padding: 12px;
        border: 1px solid $border-color-form;
        background: $background-color-form;
        text-align: left;
        
        .form-body {
            margin-bottom: 16px;
            font-size: 13pt;

            .form-entry {
                display: flex;
                justify-content: space-between;
                align-items: center;
                gap: 8px;
                padding-bottom: 26px;

                &.amount-field,
                &.card-number-field {
                    .form-entry-field {
                        width: 186px;
                    }
                }
                &.cvc-field,
                &.expiry-date-field {
                    .form-entry-field {
                        width: 80px;
                    }
                }

                .form-entry-label {
                    @include form-entry-label-base();
                    width: 25%;
                    min-width: 120px;
                }
                .form-entry-field {
                    @include form-entry-field-base();
                    display: flex;
                    justify-content: flex-end;
                    width: 75%;
                    
                    .calc-remaining-amount-btn {
                        @include control-button();
                        min-width: $form-field-btn-width;
                        margin-right: $form-field-btn-margin-right;
                        color: $color-blue;
                        font-size: 16pt;
                        line-height: 1;
                    }
                    .invalid-message {
                        left: calc(100% + 18px);
                        top: 1px;
                        width: 264px;
                    }
                }
            }
        }
    }
}

.statistics-page {
    display: flex;
    flex-direction: column;
    width: 80%;

    .statistics-header {
        @include main-content-header($header-content-min-height-large, $background-color-header);
    }
}

/////////////////////
/// Media-запросы ///
/////////////////////

@media (max-width: 1660px) {
    .order-management-controls {
        .order-status-panel {
            .order-status-panel-container {
                .order-status-steps-checkbox-collapsible {
                    display: block;

                    .order-status-steps-collapsible {
                        margin-left: 0;
                        margin-top: 0.3em;
                    }
                }
            }
        }
    }
}

@media (max-width: 1480px) {
    .modal-backdrop-portal {
        .confirm-modal,
        .alert-modal {
            max-width: 50%;
        }
    }

    .order-management-controls {
        .order-status-panel {
            .order-status-panel-container {
                .order-status-steps-checkbox-collapsible {
                    display: flex;

                    .order-status-steps-collapsible {
                        margin-left: 0.3em;
                        margin-top: 0;
                    }
                }
            }
        }
    }

    .main-header {
        .main-title {
            display: none;
        }
    }

    .home-page {
        width: 100%;
    }

    .catalog-page {
        .catalog-main {
            .products {
                .toolbar {
                    flex-direction: column;
                    align-items: center;
                    gap: $main-content-spacing;
            
                    .page-limit-selector,
                    .pagination-pages {
                        align-self: auto;
                    }
                    .pagination-pages {
                        text-align: center; 
                    }
                }
                .products-main {
                    .product-list {
                        justify-content: space-evenly;
                    }
                }
            }
        }
    }

    .catalog-management-page {
        .category-editor {
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;

            .category-info-panel,
            .category-control-panel {
                width: 50%;
            }
        }
        .product-editor {
            .product-table-section {
                .product-table {
                    @include entity-table-mini();

                    .table-body {
                        .table-row {
                            .table-row-main {
                                .row-cell {
                                    &.id-sku {
                                        .cell-content {
                                            p {
                                                &:not(:last-child) {
                                                    margin-bottom: 0;
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }

    .customer-management-page {
        .customer-table {
            @include entity-table-mini();
        }
    }
    
    .event-management-page {
        width: 100%;
    }

    .checkout-page {
        width: 100%;
    }
    
    .orders-page {
        width: 100%;
    }

    .order-details-page {
        width: 100%;
    }
}

@media (max-width: 1340px) {
    .main-header.admin-role {
        .dashboard-panel {
            .dashboard-header {
                h2 {
                    display: none;
                }
            }
        }
    }

    .order-management-controls {
        .order-status-panel {
            .order-status-panel-container {
                .order-status-steps-checkbox-collapsible {
                    display: block;

                    .order-status-steps-collapsible {
                        margin-left: 0;
                        margin-top: 0.3em;
                    }
                }
            }
        }
    }
}

@media (max-width: 1180px) {
    .modal-backdrop-portal {
        .confirm-modal,
        .alert-modal {
            max-width: 62%;
        }
    }

    .toolbar {
        flex-direction: column;
        align-items: center;
        gap: $main-content-spacing;

        .page-limit-selector,
        .pagination-pages {
            align-self: auto;
        }
        .pagination-pages {
            text-align: center; 
        }
    }

    .order-management-controls {
        .order-status-panel {
            .order-status-panel-container {
                .order-status-steps-checkbox-collapsible {
                    display: flex;

                    .order-status-steps-collapsible {
                        margin-left: 0.3em;
                        margin-top: 0;

                        .order-status-steps {
                            &.grid-pickup {
                                grid-template-areas:
                                    "confirmed processing ready-pickup"
                                    "picked-up completed cancelled";
                            }
                            &.grid-delivery {
                                grid-template-areas: 
                                    "confirmed processing ready-ship in-transit"
                                    "delivered completed cancelled cancelled";
                            }
                        }
                    }
                }
            }
        }
    }

    .main-header {
        .main-title {
            display: block;
        }
    }

    .product-details-page {
        width: 100%;

        .product-details-main {
            .product-image-gallery {
                $image-thumb-border-width: 2px;
                $image-thumb-spacing: 6px;
                $gallery-containers-border-width: 1px;
                $image-thumb-count: 4;
                $image-gallery-width: calc(
                    ($product-thumb-small-size +  $image-thumb-border-width * 2) * $image-thumb-count +
                    $image-thumb-spacing * ($image-thumb-count + 1) +
                    $gallery-containers-border-width * 2
                );
                $slide-btn-width: 48px;
                $image-slider-height: calc($image-gallery-width - $slide-btn-width * 2);

                width: $image-gallery-width;

                .image-slider {
                    height: $image-slider-height;
                }
            }
            .product-info {
                .product-main-info {
                    .product-info-item {
                        &.current-price {
                            .product-quantity-selector {
                                .add-to-cart-box {
                                    .badge-box.single-badge {
                                        left: 12px;
                                        transform: translateX(-100%);
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }

    .catalog-management-page {
        .category-editor {
            .category-info-panel,
            .category-control-panel {
                width: 75%;
            }
        }
        .product-editor {
            .product-form,
            .bulk-product-form {
                width: 75%;
            }
        }
    }

    .customer-management-page {
        .customers-notification {
            .customers-notification-controls {
                display: flex;
                flex-direction: column-reverse;
                align-items: center;
                gap: 6px;
                
                button:not(:last-child) {
                    margin-right: 0;
                }
            }
            .notification-editor-collapsible {
                width: 70%;
            }
        }
    }

    .event-management-page {
        .event-editors {
            flex-direction: column;
            align-items: center;
            justify-content: center;
    
            .news-editor,
            .promo-editor {
                width: 70%;
            }
        }
    }

    .profile-page {
        width: 100%;

        .profile-form {
            width: 50%;
        }
    }

    .error-logs-page {
        width: 100%;
    }

    .checkout-preferences-page {
        width: 100%;

        .checkout-preferences-form {
            width: 50%;
        }
    }

    .cart-page {
        .cart-main {
            .cart-item-list {
                .cart-item {
                    .cart-item-card-collapsible {
                        .cart-item-card {
                            grid-template-areas:
                                "thumb info info info info info info remove"
                                ". . prices multiply quantity equal totals .";
                            padding-bottom: 20px;
                            row-gap: $main-content-spacing;
                        }
                    }
                }
            }
        }
    }

    .checkout-page {
        .checkout-main {
            flex-direction: column;

            .checkout-form {
                order: 1;
            }
            .checkout-sidebar {
                order: 0;
                width: 100%;

                .checkout-summary {
                    padding: 8px 12px;
    
                    .checkout-row {
                        &:not(.final-row) {
                            margin-bottom: 8px;
                        }
                        &.final-row {
                            padding-top: 8px;
                        }
                    }
                }
                .checkout-order-draft-panel {
                    margin-top: 0;
                    padding: 8px 12px;
                    border-top: none;
                }
            }
        }
    }

    .order-details-page {
        .order-details-main {
            .order-details-sections {
                .order-details-section {
                    .order-details-section-form-collapsible {
                        .order-details-section-form {
                            width: 70%;
                        }
                    }
                }
            }
        }
    }

    .card-online-payment-page {
        width: 100%;

        .card-online-payment-form {
            width: 50%;
        }
    }
}

@media (max-width: 1080px) {
    .home-page {
        .home-hero {
            .home-hero-text {
                top: 20%;
                padding-right: 12px;
                font-size: 11pt;
        
                p {
                    &:not(:last-child) {
                        margin-bottom: 12px;
                    }
                }
            }
        }
        .home-search-bar,
        .home-working-hours,
        .home-info {
            width: 80%;
        }
    }
}

@media (max-width: 880px) {
    .order-card {
        .order-info-grid {
            grid-template-areas:
                "lbl-num lbl-date lbl-total lbl-paid"
                "val-num val-date val-total val-paid"
                "lbl-pay-mtd lbl-pack lbl-deliv-mtd lbl-inv"
                "val-pay-mtd val-pack val-deliv-mtd val-inv";
            grid-template-columns:
                1fr   // order-number, order-payment-method
                1fr   // order-date, order-packing
                1fr   // order-total, order-delivery-method
                1fr;  // order-paid, order-invoice

            .order-number,
            .order-date,
            .order-total,
            .order-paid {
                border-bottom: none;
            }
            .order-paid {
                border-right: none;
            }
        }
        .order-details-inline-collapsible {
            .order-details-inline {
                .order-details-inline-items {
                    .order-details-inline-items-table {
                        @include entity-table-mini();

                        .table-header {
                            display: none;
                        }
                    }
                }
            }
        }
    }

    .order-management-controls {
        .order-status-panel > .order-status-panel-container,
        .financials-status-panel > .financials-status-panel-container,
        .internal-note-panel > .internal-note-panel-container,
        .audit-logs-panel > .audit-logs-panel-container {
            .logs-checkbox-collapsible {
                display: block;
                
                .logs-collapsible {
                    margin-left: 0;
                    margin-top: 0.3em;
                }
            }
        }
        .order-status-panel {
            .order-status-panel-container {
                .order-status-steps-checkbox-collapsible {
                    .order-status-steps-collapsible {
                        .order-status-steps {
                            &.grid-delivery {
                                grid-template-areas: 
                                    "confirmed processing ready-ship"
                                    "in-transit delivered completed"
                                    "cancelled cancelled cancelled";
                            }
                        }
                    }
                }
            }
        }
    }

    .home-page {
        .home-hero {
            .home-hero-text {
                top: 20%;
                padding-right: 8px;
                font-size: 10pt;
        
                p {
                    &:not(:last-child) {
                        margin-bottom: 8px;
                    }
                }
            }
        }
        
        .home-search-bar,
        .home-working-hours,
        .home-info {
            width: 100%;
        }
    }

    .product-details-page {
        .product-details-main {
            .product-image-gallery {
                $image-thumb-border-width: 2px;
                $image-thumb-spacing: 6px;
                $gallery-containers-border-width: 1px;
                $image-thumb-count: 3;
                $image-gallery-width: calc(
                    ($product-thumb-small-size +  $image-thumb-border-width * 2) * $image-thumb-count +
                    $image-thumb-spacing * ($image-thumb-count + 1) +
                    $gallery-containers-border-width * 2
                );
                $slide-btn-width: 48px;
                $image-slider-height: calc($image-gallery-width - $slide-btn-width * 2);

                width: $image-gallery-width;

                .image-slider {
                    height: $image-slider-height;
                }
            }
        }
    }

    .order-details-page {
        .order-details-main {
            .order-details-sections {
                .order-details-section {
                    &[data-section="items"] {
                        .order-details-items-table {
                            @include entity-table-mini();
    
                            .table-header {
                                display: none;
                            }
                            .table-row-main {
                                .row-cell {
                                    &.price,
                                    &.total-price {
                                        p:not(:last-child) {
                                            margin-bottom: 0;
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}

@media (max-width: 780px) {
    .modal-backdrop-portal {
        .confirm-modal,
        .alert-modal {
            max-width: 75%;
        }
        .image-viewer-modal {
            $thumb-btn-size: 96px;
            $thumbs-container-spacing: 8px;
            $thumbs-container-border-width: 1px;
            $thumbs-btn-count: 3;
            $thumbs-container-max-height: calc(
                $thumb-btn-size * $thumbs-btn-count +
                $thumbs-container-spacing * ($thumbs-btn-count + 1) +
                $thumbs-container-border-width
            );
            $close-btn-size: 22pt;
            $close-btn-area-size: $close-btn-size + $main-content-spacing * 2;

            flex-direction: column;

            .thumbs-container {
                height: auto;
                max-height: $thumbs-container-max-height;
                border-right-width: 0;
                border-bottom: $thumbs-container-border-width solid $color-additional;

                .thumbs-scroll {
                    flex-direction: row;
                    flex-wrap: wrap;
                    padding-right: $close-btn-area-size;
                }
            }
            .close-btn {
                font-size: $close-btn-size;
            }
            .nav-arrows {
                left: 50%;
            }
        }
    }

    .toolbar {
        .filter-controls {
            .filter-settings {
                .filter-option {
                    margin-bottom: 4px;
                    padding-bottom: 4px;
                    border-bottom: 1px solid $border-color-form;
                    
                    .option-values {
                        flex-direction: column;
                        align-items: stretch;
                        gap: 0;

                        .label-radio-btn {
                            &:not(:last-child) {
                                margin-right: 0;
                            }
                        }
                        &.option-range {
                            .range-separator {
                                display: none;
                            }
                            .range-field {
                                &:not(:last-child) {
                                    margin-bottom: 3px;
                                }

                                .range-separator {
                                    display: none;
                                }
                                .range-prefix {
                                    display: inline-block;
                                    width: 22px;
                                }
                            }
                        }
                    }
                }
            }
        }
    }

    .order-card {
        .order-meta {
            .order-actions {
                flex-direction: column;
                gap: 6px;
            }
        }
    }

    .order-management-controls {
        .order-status-panel {
            .order-status-panel-container {
                .order-status-steps-checkbox-collapsible {
                    display: block;

                    .order-status-steps-collapsible {
                        margin-left: 0;
                        margin-top: 0.3em;
                    }
                }
            }
        }
        .financials-status-panel {
            .financials-status-panel-container {
                .payment-form-checkbox-collapsible,
                .refund-form-checkbox-collapsible,
                .void-event-form-checkbox-collapsible {
                    display: block;
    
                    .payment-form-collapsible,
                    .refund-form-collapsible,
                    .void-event-form-collapsible {
                        margin-left: 0;
                        margin-top: 0.3em;

                        .payment-form,
                        .refund-form,
                        .void-event-form {
                            .form-body {
                                .form-entry-label {
                                    min-width: 94px;
                                }
                            }
                        }
                    }
                }
            }
        }
        .internal-note-panel {
            .internal-note-panel-container {
                .internal-note-form-checkbox-collapsible {
                    display: block;

                    .internal-note-form-collapsible {
                        margin-left: 0;
                        margin-top: 0.3em;
    
                        .internal-note-form {
                            .form-body {
                                .form-entry-label {
                                    min-width: 94px;
                                }
                            }
                        }
                    }
                }
            }
        }
    }

    .home-page {
        .home-hero {
            .home-hero-text {
                top: 10%;
                padding-right: 6px;
                font-size: 10pt;
                font-weight: normal;
        
                p {
                    &:not(:last-child) {
                        margin-bottom: 6px;
                    }
                }
            }
        }
    }

    .catalog-page {
        .catalog-main {
            flex-direction: column;
            gap: $main-content-spacing * 2;

            .categories {
                position: static;
                width: 100%;

                .category-list {
                    max-height: none;
                    overflow: visible;
                }
            }
        }
    }

    .product-details-page {
        .product-details-main {
            flex-direction: column;
            align-items: center;
            gap: $main-content-spacing * 2;

            .product-image-gallery {
                $image-thumb-border-width: 2px;
                $image-thumb-spacing: 6px;
                $gallery-containers-border-width: 1px;
                $image-thumb-count: 5;
                $image-gallery-width: calc(
                    ($product-thumb-small-size +  $image-thumb-border-width * 2) * $image-thumb-count +
                    $image-thumb-spacing * ($image-thumb-count + 1) +
                    $gallery-containers-border-width * 2
                );
                $slide-btn-width: 48px;
                $image-slider-height: calc($image-gallery-width - $slide-btn-width * 2);

                width: $image-gallery-width;

                .image-slider {
                    height: $image-slider-height;
                }
            }
            .product-info {
                min-width: 0;
                max-width: none;
                width: 100%;
                margin-left: 0;
            }
        }
    }

    .catalog-management-page {
        .category-editor {
            .category-info-panel,
            .category-control-panel {
                width: 100%;
            }
        }
        .product-editor {
            .product-form,
            .bulk-product-form {
                width: 100%;
            }
        }
    }

    .customer-management-page {
        .customers-notification {
            .notification-editor-collapsible {
                width: 100%;
            }
        }
    }

    .notifications-page {
        .notifications-main {
            .notification-list {
                .notification-item {
                    .notification-card {
                        .notification-controls {
                            &.notification-controls button {
                                display: block;
                                margin-left: auto;
                                margin-right: 0;
        
                                &:not(:first-child) {
                                    margin-top: 4px;
                                }
                            }
                        }
                    }
                }
            }
        }
    }

    .event-management-page {
        .event-editors {
            .news-editor,
            .promo-editor {
                width: 100%;
            }
        }
    }
    
    .personal-page {
        margin: $main-content-spacing;

        .personal-menu-wrapper {
            .personal-menu {
                .personal-item {
                    a {
                        .icon {
                            margin-left: 24px;
                        }
                    }
                }
            }
        }
    }

    .profile-page {
        .profile-form {
            width: 100%;
            min-width: auto;
    
            .form-body {
                .form-group {
                    .form-entry {
                        &.error-space {
                            min-height: 56px;
                        }
                        .form-col  {
                            &.col-right {
                                .form-entry-field {
                                    .invalid-message {
                                        left: 0.4em;
                                        top: calc(100% + 0.1em);
                                        width: calc(100% - 0.4em);
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }

    .checkout-preferences-page {
        .checkout-preferences-form {
            width: 100%;
            min-width: auto;

            .form-body {
                .form-group {
                    .form-group-entries {
                        .form-entry {
                            padding-bottom: 26px;

                            .form-entry-field {
                                .invalid-message {
                                    left: 0.4em;
                                    top: calc(100% + 0.1em);
                                    width: calc(100% - 0.4em);
                                    text-align: left;
                                }
                            }
                        }
                    }
                }
            }
        }
    }

    .cart-page {
        .cart-summary-wrapper {
            .cart-summary {
                flex-direction: column;
                align-items: flex-end;
            }
        }
        .cart-main {
            .cart-main-header {
                flex-direction: column;
                min-width: 0;

                .toolbar {
                    order: 1;
                    width: 100%;
                    max-width: 400px;
                }
                .cart-main-controls {
                    align-self: flex-end;
                    order: 0;
                }
            }
            .cart-item-list {
                .cart-item {
                    .cart-item-card-collapsible {
                        .cart-item-card {
                            grid-template-areas:
                                "thumb"
                                "info"
                                "prices"
                                "quantity"
                                "totals";
                            grid-template-columns: auto;
                            position: relative;
                            padding-bottom: 12px;
                            column-gap: 0;
                            row-gap: $main-content-spacing;
                    
                            .math-symbol {
                                display: none;
                            }
                            .product-thumb {
                                justify-self: center;
                            }
                            .remove-product-box {
                                position: absolute;
                                right: 12px;
                                top: 12px;
                            }
                            .product-prices,
                            .product-quantity-selector,
                            .out-of-stock,
                            .inactive,
                            .product-total-amounts {
                                justify-self: center;
                                text-align: center;
                            }
                            .product-quantity-selector {
                                .reduction-message {
                                    position: static;
                                    left: 0;
                                    top: 0;
                                    transform: translateX(0);
                                    white-space: normal;
                                    text-align: center;
                                }
                                .add-to-cart-box {
                                    .badge-box.single-badge {
                                        left: calc(100% - 8px);
                                        top: -6px;
                                        transform: translate(0, 0);
                                    }
                                }
                            }
                        }
                        .cart-item-pending-removal,
                        .cart-item-deleted {
                            flex-direction: column;

                            .cart-item-info {
                                align-self: flex-start;
                            }
                            .cart-item-controls-box {
                                align-self: flex-end;
                            }
                        }
                    }
                }
            }
        }
    }

    .checkout-page {
        .checkout-main {
            .checkout-form {
                .form-body {
                    .form-group {
                        &.order-items-group {
                            .order-items-collapsible {
                                .order-items {
                                    .order-items-headers {
                                        display: none;
                                    }
                                    .order-item {
                                        grid-template-areas:
                                            "thumb title title title"
                                            ". sku quantity totals";
                                        grid-template-columns:
                                            $product-thumb-smallest-size 1fr 0.8fr 1fr;

                                        .product-info-item {
                                            .label {
                                                display: block;
                                            }
                                        }
                                        .product-thumb,
                                        .product-title {
                                            align-self: flex-start;
                                        }
                                        .product-sku,
                                        .product-quantity,
                                        .product-total-amounts {
                                            align-items: center;
                                            width: auto;
                                            border-top: 1px solid $border-color-form;
                                        }
                                        .product-total-amounts {
                                            .value {
                                                .product-original-total {
                                                    right: auto;
                                                    left: 50%;
                                                    transform: translateX(-50%);
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }

    .order-details-page {
        .order-details-main {
            .order-details-sections {
                .order-details-section {
                    .order-details-section-form-collapsible {
                        .order-details-section-form {
                            width: 100%;

                            .form-body {
                                .form-entry {
                                    .form-entry-label {
                                        min-width: 90px;
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }

    .card-online-payment-page {
        .card-online-payment-form {
            align-self: center;
            width: 100%;
            min-width: 0;

            .form-body {
                .form-entry {
                    &.amount-field {
                        .form-entry-field {
                            .invalid-message {
                                $shift: calc(0.4em + $form-field-btn-width + $form-field-btn-margin-right);

                                left: $shift;
                                width: calc(100% - $shift);
                            }
                        }
                    }

                    .form-entry-label {
                        min-width: 92px;
                    }
                    .form-entry-field {
                        .invalid-message {
                            left: 0.4em;
                            top: calc(100% + 0.1em);
                            width: calc(100% - 0.4em);
                        }
                    }
                }
            }
        }
    }
}

@media (max-width: 540px) {
    $order-content-spacing: 6px;

    .modal-backdrop-portal {
        .confirm-modal,
        .alert-modal {
            min-width: $base-min-width;
            max-width: 85%;
        }
    }

    .toolbar {
        .search-controls {
            width: 100% !important;
        }
    }

    .form-footer {
        flex-direction: column;
        align-items: flex-end;

        .form-status {
            justify-content: flex-end;
            margin-bottom: 8px;

            .message-box {
                text-align: right;
            }
        }
    }
    
    .order-card {
        .order-summary {
            padding: $order-content-spacing;
        }
        .order-info-grid {
            grid-template-areas:
                "lbl-num lbl-date"
                "val-num val-date"
                "lbl-total lbl-paid"
                "val-total val-paid"
                "lbl-pay-mtd lbl-pack"
                "val-pay-mtd val-pack"
                "lbl-deliv-mtd lbl-inv"
                "val-deliv-mtd val-inv";
            grid-template-columns:
                1fr   // order-number, order-total, order-payment-method, order-delivery-method
                1fr;  // order-date, order-paid, order-packing, order-invoice

            .order-payment-method,
            .order-packing {
                border-bottom: none;
            }
            .order-date,
            .order-packing {
                border-right: none;
            }
        }
        .order-meta {
            padding: $order-content-spacing;

            &.mobile-stack { // В заказах покупателя и таблице покупателей админа
                flex-direction: column;
                gap: $order-content-spacing * 2;
            }

            .order-actions {
                flex-direction: row;
                justify-content: space-between;
                gap: $order-content-spacing;
                width: 100%;

                button:only-child { // Если кнопка внутри блока одна, она сдвигается вправо
                    margin-left: auto;
                }
            }
        }
        .order-details-inline-collapsible {
            .order-details-inline {
                .order-details-inline-items {
                    .order-details-inline-items-summary {
                        align-items: flex-start;
                        padding: $order-content-spacing;

                        p {
                            .label-col {
                                width: 150px;
                            }
                            .value-col {
                                display: flex;
                                align-items: flex-end;
                                width: auto;
                            }
                        }
                    }
                }
            }
        }
    }

    .order-management-notes {
        .note {
            .note-popup {
                width: 264px;
            }
        }
    }

    .order-management-controls {
        .order-status-panel > .order-status-panel-container,
        .financials-status-panel > .financials-status-panel-container,
        .internal-note-panel > .internal-note-panel-container,
        .audit-logs-panel > .audit-logs-panel-container {
            padding: $order-content-spacing;
        }
        .order-status-panel {
            .order-status-panel-container {
                .order-status-steps-checkbox-collapsible {
                    .order-status-steps-collapsible {
                        .order-status-steps {
                            grid-template-columns: repeat(2, 1fr);

                            &.grid-pickup {
                                grid-template-areas:
                                    "confirmed processing"
                                    "ready-pickup picked-up"
                                    "completed cancelled";
                            }
                            &.grid-delivery {
                                grid-template-areas: 
                                    "confirmed processing"
                                    "ready-ship in-transit"
                                    "delivered completed"
                                    "cancelled cancelled";
                            }
                        }
                    }
                }
            }
        }
        .financials-status-panel {
            .financials-status-panel-container {
                .payment-form-checkbox-collapsible,
                .refund-form-checkbox-collapsible,
                .void-event-form-checkbox-collapsible {
                    .payment-form-collapsible,
                    .refund-form-collapsible,
                    .void-event-form-collapsible {
                        .payment-form,
                        .refund-form,
                        .void-event-form {
                            width: 100%;
                            padding: 10px;
                        }
                    }
                }
            }
        }
        .internal-note-panel {
            .internal-note-panel-container {
                .internal-note-form-checkbox-collapsible {
                    .internal-note-form-collapsible {
                        .internal-note-form {
                            width: 100%;
                            padding: 10px;
                        }
                    }
                }
            }
        }
    }

    .main-header {
        .header-main-panel {
            .auth-wrapper {
                .auth-nav {
                    line-height: 1.1;

                    ul {
                        li {
                            &:not(:first-child) {
                                margin-left: 12px;
                            }
                        }
                    }
                }
            }
        }
    }

    main {
        .page-content {
            padding: $main-content-spacing 10px;
        }
    }

    .page-menu {
        width: 100%;
    }

    .home-page {
        font-size: 14pt;

        .home-hero {
            .home-hero-text {
                top: 38%;
                padding-right: 10px;
                font-size: 14pt;
                font-weight: bold;
        
                p:not(.title) {
                    display: none;
                }
            }
        }
        .home-search-bar {
            .search-controls {
                .search-btn {
                    width: 100px;
                }
            }
        }
        .home-working-hours {
            p {
                font-size: 12pt;
            }
        }
    }

    .about-shop-page {
        width: 100%;
    
        .about-shop-main {
            font-size: 14pt;

            .about-shop-image {
                width: 100%;
                max-width: none;
                margin: 0 0 12px 0;
                float: none;
            }
        }
    }

    .news-page {
        width: 100%;

        .news-main {
            .news-list {
                .news-item {
                    .news-card {
                        padding: $main-content-spacing 10px;

                        .news-title {
                            font-size: 18pt;
                        }
                        .news-content {
                            font-size: 14pt;
                        }
                    }
                }
            }
        }
    }

    .promos-page {
        width: 100%;

        .promos-main {
            .promo-list {
                .promo-item {
                    .promo-card {
                        padding: $main-content-spacing 10px 0;

                        .promo-title {
                            font-size: 18pt;
                        }
                        .promo-description {
                            font-size: 14pt;
                        }
                    }
                }
            }
        }
    }

    .product-details-page {
        .product-details-main {
            .product-image-gallery {
                width: 100%;
            }
            .product-info {
                .product-main-info {
                    overflow-wrap: anywhere;
    
                    .product-info-item {
                        &.original-price {
                            flex-direction: column;
                            justify-content: flex-start;
                            align-items: flex-start;
                            gap: 6px;
                        }
                        &.current-price {
                            flex-direction: column;
                            justify-content: flex-start;
                            align-items: flex-start;
                            gap: $main-content-spacing;

                            .out-of-stock,
                            .inactive {
                                align-self: flex-end;
                            }
                            .product-quantity-selector {
                                align-items: flex-start;

                                .reduction-message {
                                    text-align: left;
                                }
                                .add-to-cart-box {
                                    .badge-box.single-badge {
                                        left: calc(100% - 12px);
                                        transform: translateX(0);
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }

    .delivery-page {
        width: 100%;

        .delivery-main {
            font-size: 14pt;
        }
    }

    .guarantees-page {
        width: 100%;
        
        .guarantees-main {
            font-size: 14pt;
        }
    }

    .insurance-page {
        width: 100%;
        
        .insurance-main {
            font-size: 14pt;
        }
    }

    .licenses-page {
        width: 100%;
        
        .licenses-main {
            font-size: 14pt;
        }
    }

    .company-details-page {
        width: 100%;
        
        .company-details-main {
            font-size: 14pt;
        }
    }

    .contacts-page {
        width: 100%;
        
        .contacts-main {
            font-size: 14pt;

            .working-hours {
                font-size: 12pt;
            }
        }
    }

    .auth-page {
        .auth-form {
            padding: 20px 10px;
    
            &[data-type="registration"] { width: 100%; }
            &[data-type="login"] { width: 100%; }
    
            .form-body {
                .form-entry {
                    &:not(:first-of-type):not(:last-of-type) {
                        padding: 52px 0;
                    }
                    .form-entry-field {
                        width: 70%;
                    }
                }
            }
        }
    }

    .notifications-page {
        width: 100%;
    }
    
    .catalog-management-page {
        .category-editor {
            .category-selection-panel {
                width: 100%;
    
                .category-level {
                    margin-top: 8px;
                    text-align: left;
                    white-space: normal;
        
                    select {
                        width: 100%;
                    }
                }
            }
        }
        .product-editor {
            .product-form {
                .form-entry {
                    .form-entry-label {
                        min-width: 122px;
                    }
                }
            }
            .bulk-product-form {
                .form-entry {
                    .form-entry-checkbox-label {
                        min-width: 122px;
                    }
                }
            }
        }
    }

    .customer-management-page {
        .customers-notification {
            .notification-editor-collapsible {
                .notification-editor {
                    .notification-form {
                        .form-body {
                            .form-entry {
                                padding-bottom: 34px;
    
                                .form-entry-label {
                                    width: 40%;
                                    min-width: 112px;
                                }
                                .form-entry-field {
                                    width: 60%;
                                }
                            }
                        }
                    }
                }
            }
        }
        .customer-table {
            .table-body {
                .table-row {
                    .table-row-expansion-collapsible {
                        .table-row-expansion {
                            .customer-table-orders {
                                .customer-table-orders-main {
                                    .orders-load-controls {
                                        flex-direction: column;
                                        align-items: center;
                                        gap: 4px;
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    
    .event-management-page {
        .event-editors {
            .news-form,
            .promo-form {
                .form-body {
                    .form-entry {
                        .form-entry-label {
                            width: 35%;
                            min-width: 118px;
                        }
                        .form-entry-field {
                            width: 65%;
                        }
                    }
                }
            }
        }
    }

    .profile-page {
        .profile-form {
            .form-body {
                .form-group {
                    .form-entry {
                        &.error-space {
                            min-height: 68px;
                        }
                    }
                }
            }
        }
    }
    
    .cart-page {
        .cart-summary-wrapper {
            .cart-summary {
                .cart-totals {
                    flex-direction: column;
                    align-items: flex-end;

                    .cart-totals-title-box {
                        display: none;
                    }
                }
            }
        }
        .cart-main {
            .cart-main-header {
                .cart-main-controls {
                    flex-direction: column;
                    align-items: flex-end;

                    .cart-main-info {
                        order: 1;
                    }
                }
            }
            .cart-item-list {
                .cart-item-pending-removal {
                    .cart-item-controls-box {
                        .cart-item-buttons-box {
                            flex-direction: column;
                            align-items: flex-end;
                            gap: 4px;
                        }
                    }
                }
            }
        }
    }
    
    .checkout-page {
        .checkout-main {
            .checkout-form {
                .form-body {
                    .form-group {
                        &.order-items-group {
                            .order-items-collapsible {
                                .order-items {
                                    .order-item {
                                        grid-template-areas:
                                            "thumb"
                                            "title"
                                            "sku"
                                            "quantity"
                                            "totals";
                                        grid-template-columns: auto;
                                        row-gap: normal;
                                        column-gap: normal;

                                        .product-info-item {
                                            flex-direction: row;
                                            gap: 0.3em !important;
                                            border-top: none;

                                            &:not(:last-child) {
                                                margin-bottom: 2px;
                                            }

                                            .label {
                                                .colon {
                                                    display: inline;
                                                }
                                            }
                                        }
                                        .product-thumb {
                                            justify-self: center;
                                            width: $product-thumb-small-size;
                                            height: $product-thumb-small-size;
                                            margin-bottom: 6px;
                                        }
                                        .product-title {
                                            margin-bottom: 15px;
                                        }
                                        &.has-discount > .product-total-amounts {
                                            margin-top: 12px;

                                            .value {
                                                .product-original-total {
                                                    right: 0;
                                                    left: auto;
                                                    transform: translateX(0);
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }

                        &.customer-comment-group,
                        .form-group-entries-collapsible {
                            .form-group-entries {
                                .form-entry {
                                    .form-entry-label {
                                        width: 30%;
                                        min-width: 90px;
                                    }
                                    
                                    .form-entry-field {
                                        width: 70%;
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }

    .order-details-page {
        .order-details-main {
            .order-details-sections {
                .order-details-section {
                    &[data-section="items"] {
                        .order-details-items-table {
                            &.edit-mode {
                                margin-top: $order-content-spacing;
                            }
                        }
                        .order-details-items-summary {
                            align-items: flex-start;
                            padding: $order-content-spacing;
    
                            p {
                                .label-col {
                                    width: 164px;
                                }
                                .value-col {
                                    display: flex;
                                    align-items: flex-end;
                                    width: auto;
                                }
                            }
                        }
                    }
                    .order-details-section-form-collapsible {
                        padding: 0 $order-content-spacing;
                        
                        .order-details-section-form {
                            margin-top: $order-content-spacing;
                        }
                    }
                    .order-details-section-main {
                        padding: $order-content-spacing;
                    }
                }
            }
        }
    }
}

@media (max-width: 360px) {
    .modal-backdrop-portal {
        .confirm-modal,
        .alert-modal {
            min-width: auto;
            max-width: none;
        }
    }

    .toolbar {
        .filter-controls {
            .filter-settings {
                .filter-option {
                    flex-direction: column;
                    gap: 6px;

                    .option-label {
                        width: auto !important;
                        align-self: flex-start;
                    }
                    .option-values {
                        align-self: flex-start;
                        margin-left: 25%;
                    }
                }
            }
        }
    }

    .order-management-notes {
        .note {
            .note-popup {
                width: 234px;
            }
        }
    }

    .main-header {
        .header-main-panel {
            .auth-wrapper {
                .auth-nav {
                    padding: 4px;
                }
            }
        }
    }

    .home-page {
        .home-hero {
            .home-hero-text {
                top: 38%;
                padding-right: 6px;
                font-size: 11pt;
            }
        }
    }
}
